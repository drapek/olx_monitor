AbstractSearchFiltersClass=BaseClass.extend({init:function(indexClass){this.submitTimer=null;this.initSettings();this.initDom();this.initPageLoader();this.initQ();this.initOrder();this.initCategories();this.initFacets(this.dom.form);this.initCurrencyButtons();this.initClearParams();this.initSearchOptions();this.initFilters();this.setSearchParams();this.showClearButtonIfNeeded();this.paramsListOpt();this.initFavSearchTooltip()},initSettings:function(){this.settings={shortFields:false,showFloatParamLabel:false};if(this.isModuleActive('olx_redesign'))this.settings.shortFields=true},paramsListOpt:function(){$('#paramsListOpt').renderForms({})},initDom:function(){var dom={form:$('#mainTopSearch'),adsContainer:$('#listContainer'),headerContainer:$('#header-container'),bodyContainer:$('#body-container'),params:$('#paramsList'),body:$('body'),categoryHidden:$('#searchFormCatID'),categoryList:$('ul#categorySelectList'),clearParams:$('#clear-params'),searchList:$('#searchList')};dom.qInput=$('#search-text',dom.form);dom.regionInput=$('#cityField',dom.form);dom.distanceSelect=$('#distanceSelect',dom.form);this.dom=dom},initOrder:function(){var thiz=this;if(this.isModuleActive('olx_redesign')){$select=$('#order-select-gallery');$select.change(function(){var $this=$(this),$hidden=$('input[name="search[order]"]',thiz.dom.form);if(!$hidden.length)$hidden=$('<input type="hidden" name="search[order]" />').appendTo(thiz.dom.form);var $optionSelected=$this;if($optionSelected.length){$hidden.val($optionSelected.val())}else $hidden.remove();thiz.submitForm();return true})}else{$select=$('#order-select-gallery').find('a');$select.click(function(){var $this=$(this),$hidden=$('input[name="search[order]"]',thiz.dom.form);if(!$hidden.length)$hidden=$('<input type="hidden" name="search[order]" />').appendTo(thiz.dom.form);var $optionSelected=$this;if($optionSelected.length){$hidden.val($optionSelected.data('type'))}else $hidden.remove();thiz.submitForm();return true})};if(typeof $.fn.renderForms=='function')$select.parent().renderForms()},initQ:function(){var thiz=this,lastQ='',clearing=false;thiz.dom.qInput.keydown(function(e){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;thiz.dom.qInput.addClass('fbold');if(key==13){lastQ=thiz.dom.qInput.val();thiz.dom.qInput.data('lastQWithEnter',lastQ);thiz.submitForm(10)}else if(key==8)clearing=true}).blur(function(){if(thiz.dom.qInput.val()!=thiz.dom.qInput.attr('defaultval')||clearing){var lastQWithEnter=thiz.dom.qInput.data('lastQWithEnter')||'';if((lastQWithEnter==''||thiz.dom.qInput.val()!=lastQWithEnter)&&(lastQ==''||thiz.dom.qInput.val()!=lastQ)){thiz.dom.qInput.data('lastQWithEnter','');lastQ=thiz.dom.qInput.val();thiz.submitForm(300)}};clearing=false});$('a#clearQ',thiz.dom.form).click(function(){thiz.submitForm()})},initCategories:function(){var thiz=this,$categoryInput=$('#choosecat'),$categoryList=thiz.dom.categoryList;$categoryInput.click(function(event){if(!$categoryInput.hasClass('binded')){$categoryInput.addClass('binded');var html='<li>';html+='<a href="" class="rel block tdnone category-icon categorySelectA1" data-name="Wszystkie kategorie" data-id="0">Wszystkie kategorie';html+='</a>';html+='</li>';var category_id=thiz.dom.categoryHidden.val(),currentCategory=category_id,rootCategory='';for(var z in searchCategories){var category=searchCategories[z];html+='<li>';html+='<a id="a-category-'+category.id+'" href="" class="rel block tdnone category-icon categorySelectA1 a-category-'+category.id+'" data-icon_class="a-category-'+category.id+'" data-name="'+(typeof category['name_'+window.lang]!="undefined"?category['name_'+window.lang]:category.name)+'" data-id="'+category.id+'">';html+=(typeof category['name_'+window.lang]!="undefined"?category['name_'+window.lang]:category.name);if(category.children.length)html+='<i data-icon="raquo"></i>';html+='<span data-id="'+category.id+'" class="counter counterCategory small abs hidden">0</span>';html+='</a>';if(category.children.length){html+='<ul class="abs">';html+='<li>';html+='<a id="a-category-'+category.id+'" href="" class="rel block tdnone categorySelectA2 a-category-'+category.id+'" data-icon_class="a-category-'+category.id+'" data-name="Wszystkie w '+(typeof category['name_'+window.lang]!="undefined"?category['name_'+window.lang]:category.name)+'" data-id="'+category.id+'">';html+='Wszystkie w '+(typeof category['name_'+window.lang]!="undefined"?category['name_'+window.lang]:category.name);html+='</a>';html+='</li>';for(var x in category.children){var child=category.children[x];if(child.id==category_id)rootCategory=category.id;html+='<li>';html+='<a id="a-category-'+child.id+'" href="" class="rel block tdnone categorySelectA2" data-icon_class="a-category-'+category.id+'" data-name="'+(typeof child['name_'+window.lang]!="undefined"?child['name_'+window.lang]:child.name)+'" data-id="'+child.id+'">';html+=(typeof child['name_'+window.lang]!="undefined"?child['name_'+window.lang]:child.name);html+='<span data-id="'+child.id+'" class="counter counterCategory small abs hidden">0</span>';html+='</a>';html+='</li>'};html+='</ul>'};html+='</li>'};$(html).appendTo($categoryList);if(category_id&&!rootCategory){rootCategory=root_category_id;category_id=second_category_id};category_id&&$('#a-category-'+category_id).parent().addClass('selected');rootCategory&&$('#a-category-'+rootCategory).parent().addClass('selected');$('a.categorySelectA1, a.categorySelectA2',$categoryList).click(function(){var $this=$(this),$catHidden=$('#searchFormCatID');if($catHidden.val()==$this.data('id')){$categoryList.hide();return false};$catHidden.val($this.data('id')).trigger('change');$('#main-category-choose-label').addClass('fbold').text($this.data('name')).closest('a');if(parseInt($this.data('id'))==0){$('#main-category-choose-label').removeClass('fbold');$categoryInput.removeClass('fbold');$this.closest('ul#categorySelectList').find('li').removeClass('selected')};$categoryList.hide();$categoryInput.removeClass(function(index,css){return(css.match(/\ba-category-\S+/g)||[]).join(' ')}).addClass($this.data('icon_class'));var $thirdCategory=$('li.subcategory a.category',thiz.dom.params);$thirdCategory.each(function(){var $header=$('span.header',$(this));if($header.length)$header.text($header.data('defaultLabel'))}).removeClass('fbold').closest('div.filter-item').find('.subSelect').removeClass('hidden');$('input[name="search[offer_seek]"]',thiz.dom.form).remove();var copyParameters=!currentCategory;thiz.categoryChanged($this.data('id'),false,copyParameters);thiz.clearFilters(false);thiz.submitForm(20);return false});thiz.initFacets($categoryList);Main.initScaleDropDown($categoryList)};if(!thiz.fakeClick){$categoryList.toggle();event.preventDefault()}});$(document).bind('click',function(e){var $clicked=$(e.target);if(!$clicked.parents().hasClass('combospace'))$categoryList.hide()});$('#distanceSelect').find('a').click(function(){if($('#regions-layer').length&&(window.sitecode=='olxro'||window.sitecode=='olxua'))$('#regions-layer').hide();$categoryList.hide()})},initPageLoader:function(){this.Pageloader=$('<div class="pageloader" id="loader"><div></div></div>').hide().appendTo(this.dom.form)},showPageLoader:function(percentage,time,callback){var thiz=this;callback=callback==undefined?function(){}:callback;this.Pageloader.show().find('div').animate({width:percentage+'%'},time,callback);var $listContainer=thiz.dom.adsContainer,$headerContainer=thiz.dom.headerContainer;if($listContainer.length>0){$listContainer.addClass('loaderActive');var ListLoaderPositionTop=$listContainer[0].getBoundingClientRect().top,HeaderContainerHeight=$headerContainer.height();this.ListOverlay=$('<div class="listOverlay"><div><div class="loader"></div>Ładowanie...</div></div>');this.ListOverlay.find('> div').css({top:(ListLoaderPositionTop<=HeaderContainerHeight?HeaderContainerHeight:ListLoaderPositionTop)+70});this.ListOverlay.appendTo($listContainer)}},hidePageLoader:function(percentage){var thiz=this,$listContainer=thiz.dom.adsContainer;$listContainer.removeClass('loaderActive');this.Pageloader.fadeOut(400,function(){thiz.Pageloader.find('div').css('width','0px')});this.ListOverlay.remove()},stopPageLoader:function(percentage){this.Pageloader.find('div').stop();this.ListOverlay.remove()},submitForm:function(timeout,withPage){var thiz=this;if(!withPage||$('#pageHidden').val()=='1')$('#pageHidden').remove();if(this.submitTimer!=null)window.clearTimeout(this.submitTimer);if(timeout==0){thiz.dom.form.submit();thiz.showClearButtonIfNeeded()}else{if(this.submitTimer)window.clearTimeout(this.submitTimer);this.submitTimer=window.setTimeout(function(){thiz.dom.form.submit();thiz.showClearButtonIfNeeded()},timeout==undefined?100:parseInt(timeout))}},toggleSearchButtonFilters:function(){var thiz=this;if($('ul.grid-4 li:visible',thiz.dom.params).size()<=0){this.moveSearchButtonToFilters()}else this.moveSearchButtonBelowFilters()},moveSearchButtonToFilters:function(){this.dom.searchList.addClass('with-filters')},moveSearchButtonBelowFilters:function(){this.dom.searchList.removeClass('with-filters')},createParameterLabel:function(prefix,value,unit,key){var thiz=this,intValue=parseInt(value);if(intValue)value=thiz.formatNumber(value,0);if(key=='floor'||key=='floors')for(var x in window.searchValues){var keys=window.searchValues[x]['k'],categories=window.searchValues[x]['c'];if(keys[key]&&categories[category_id]){var values=window.searchValues[x]['v'];if(values[value])value=values[value]}};if(intValue||(value=='free'||value=='exchange'||value=='budget')){unit=unit&&!(value=='free'||value=='exchange'||value=='budget')?' '+unit:'';value=prefix+' '+this.translateValue(value)+unit};return value},createNodeSubcategories:function(categoryID,label,children){var categorySelected=children[categoryID],html='<li class="subcategory" id="param_subcat">';if(this.isModuleActive('olx_redesign')){html+='<div class="filter-headline">'+label+'</div>';var defaultLabel='Wszystkie'}else var defaultLabel=label;html+='<div class="filter-item rel category-item">';if(!categorySelected)html+='<div class="subSelect abs zi2" id="subSelect'+categoryID+'">Wybierz kategorię</div>';html+='<a href="javascript:void(0);" class="button gray block category rel zi3 clr '+(categorySelected?'fbold':'')+'">';html+='<span class="3rd-category-choose-label header block" data-default-label="'+defaultLabel+'">';html+=defaultLabel;html+='</span><span class="icon down abs"></span>';html+='</a>';html+='<ul class="small suggestinput bgfff lheight20 br-3 abs hidden subcategories">';html+='<li class="clr brbottdash-2">';html+='<a id="all-categories" class="tdnone block value c000 category-choose category_choose'+categoryID+' search-choose"  data-name="search[category_id]" data-value= "'+categoryID+'" href="#">';html+='Wszystkie';html+='</a>';html+='</li>';html+='</ul>';html+='</div>';html+='</li>';return $(html)},createNodeSelectValues:function(key,name,values,$suggest){if(!geoData.params||!geoData.params.search||!geoData.params.search['filter_enum_'+key])$suggest.find('input.all-checkbox').attr('checked','checked');if($suggest.find('input.all-checkbox').length==0){var checkLabel='f-all-filter_enum_'+key;html='<li class="clr brbottdash-2">';html+='<label class="block value c000 lheight18 multichbox" for="'+checkLabel+'">';html+='<input id="'+checkLabel+'" type="checkbox" class="inlblk all-checkbox {renderformClass: \'inlblk vtop margintop3 marginright5\'}" /><span class="multichbox__icon"></span>';html+='Wszystkie';html+='</label>';html+='</li>';$(html).appendTo($suggest)};for(var z in values){var label=values[z].replace(/"/g,'&quot;'),$li=$('<li class="dynamic clr brbott-4 "></li>'),$label=$('<label class="chbox multichbox inlblk value c27 lheight18 active-filter" for="f-'+z+'_'+key+'"></label>').appendTo($li);$('<input id="f-'+z+'_'+key+'" type="checkbox" class="inlblk" data-name="'+name+'" data-text="'+label+'" data-value="'+z+'" data-renderform-class="inlblk vtop margintop3 marginright5" /><span class="multichbox__icon"></span>').appendTo($label);var $label2=$('<label class="select-only-this-opiton inlblk value c27 lheight18 active-filter" data-name="'+name+'" data-text="'+label+'" data-value="'+z+'"></label>').appendTo($li);if(key=='car_body')$('<span class="icon rel marginright5 inlblk car '+z+'"></span>').appendTo($label2);$("<span>"+label+"</span>").appendTo($label2);$li.appendTo($suggest)}},createNodeRanges:function(label,name,values,$suggest){var thiz=this,isTo=$suggest.closest('div.filter-item').hasClass('filter-item-to');for(var z in values){var additionlClass='';if(values[z]=='free'||values[z]=='exchange'){if(isTo)continue;if(values[z]=='exchange'&&geoData.params.search&&geoData.params.search['order']&&geoData.params.search['order'].indexOf('filter_float_price')>=0)continue;if(name.indexOf('filter_float_salary')>-1)continue;additionlClass='free-or-exchange-option'};var valueCleared=values[z].replace(/:/g,','),urlValue=valueCleared.replace(new RegExp(thousands_separator,'g'),'').replace(new RegExp('\\'+decimal_separator,'g'),'.');$('<li class="dynamic '+additionlClass+'"><a data-unit="'+label+'" class="tdnone block c27 brbott-4 search-choose" data-name="'+valueCleared+'" data-value="'+urlValue+'" href="javascript:void(0);">'+thiz.createNodeRangesLabel(name,thiz.translateValue(valueCleared),values[z],label)+'</a></li>').appendTo($suggest)}},createNodeRangesLabel:function(name,value,valueOryginal,label){if(name=='search[filter_float_floor][]'||name=='search[filter_float_floors][]'){var key=name=='search[filter_float_floor][]'?'floor':'floors';for(var x in window.searchValues){var keys=window.searchValues[x]['k'],categories=window.searchValues[x]['c'];if(keys[key]&&categories[category_id]){var values=window.searchValues[x]['v'];if(values[value])return values[value]}}};return value+' '+(['free','exchange','budget'].indexOf(valueOryginal)>=0?'':label)},createNodeFilter:function(param,disabled,rand){var unit=param.key==='price'&&!window.module_currencies?window.config_currency:param.suffix,cssClass=param.solr_type=='float'||param.solr_type=='both'?'paramFloat':'paramSelect',inputName=param.solr_column_name.replace('_both','_float'),html='<li class="param '+cssClass+' '+(disabled?'disabled':'')+'" data-name="search['+inputName+'][]" data-key="'+param.key+'" data-param-id="'+param.id+'" id="param_'+param.key+'">';if(cssClass=='paramFloat'){var solrName=param.solr_column_name.replace('both','float');if(this.isModuleActive('olx_redesign'))html+='<div class="filter-headline">'+param.label+'</div>';html+='<div class="filter-both-item">';if(this.settings.showFloatParamLabel)html+='<span class="numeric-label">'+param.label+'</span>';var floatSufffixes=['from','to'];for(var z in floatSufffixes){html+='<div class="filter-item filter-item-'+floatSufffixes[z]+' rel numeric-item '+(solrName=='filter_float_price'?'price':'')+' '+(solrName=='filter_float_salary'?'salary':'')+'">';html+='<a href="javascript:void(0);" class="button button-'+floatSufffixes[z]+' numeric gray block fnormal rel zi3 clr">';if(this.isModuleActive('olx_redesign')){var defaultLabel=(floatSufffixes[z]=='from'?'od':'do')}else var defaultLabel=param.label+' '+(floatSufffixes[z]=='from'?'od':'do');html+='<span class="header block" data-default-label="'+defaultLabel.replace(/"/g,'&quot;').replace(/'/g,"\\'")+'">';html+=defaultLabel;html+='</span>';html+='<span class="icon down abs"></span>';html+='</a>';html+='<label class="num-input block rel hidden">';html+='<input maxlength="'+(param.key==='salary'?15:((typeof param.validators.max!='undefined')?param.validators.max.toString().length:13))+'" value="" type="text" data-name="search['+solrName+':'+floatSufffixes[z]+']" class="small vtop '+(floatSufffixes[z]=='from'?'min':'max')+'-value-input '+floatSufffixes[z]+'" defaultval="'+(floatSufffixes[z]=='from'?'od':'do')+'..." />';html+='</label>';html+='<ul class="small suggestinput numeric-suggest bgfff lheight20 br-3 abs range hidden" data-unit="'+unit+'"></ul>';html+='</div>'};html+='</div>'}else{if(this.isModuleActive('olx_redesign')){html+='<div class="filter-headline">'+param.label+'</div>';var defaultLabel='Wszystkie'}else var defaultLabel=param.label;html+='<div class="filter-item rel filter-item-'+param.key+'">';html+='<a href="javascript:void(0);" class="button gray block fnormal rel zi3 clr">';html+='<span class="header block" data-default-label="'+defaultLabel+'">';html+=defaultLabel;html+='</span>';html+='<span class="icon down abs"></span>';html+='</a>';html+='<ul class="small suggestinput bgfff lheight20 br-3 abs select hidden" data-unit="'+unit+'">';html+='<li class="clr brbottdash-2">';var checkLabel='f-all-'+param.solr_column_name+'_'+rand;html+='<label class="block value c000 lheight18 multichbox" for="'+checkLabel+'">';html+='<input id="'+checkLabel+'" type="checkbox" class="inlblk all-checkbox {renderformClass: \'inlblk vtop margintop3 marginright5\'}" /><span class="multichbox__icon"></span>';html+='Wszystkie';html+='</label>';html+='</li>';html+='</ul>';html+='</div>'};html+='</li>';return $(html)},careteNodesSubcategories:function($subcategory,children){var html='',sort=0;while(true){var has=false;for(var x in children)if(sort==parseInt(children[x]['s'])){html+='<li>';html+='<a class="tdnone block c27 brbott-4 category-choose category_choose'+x+' search-choose" data-name="search[category_id]" data-value="'+x+'" data-code="'+children[x]['code']+'" href="#">';html+=children[x]['label'];html+='<span class="counter counterCategory small abs hidden" data-id="'+x+'"></span>';html+='</a>';html+='</li>';sort++;has=true;break};if(!has)break};return $(html).appendTo($('ul.suggestinput',$subcategory))},careteNodesDistricts:function($districts,children){var html='';for(var x in children){var nameDist=typeof children[x]['name_'+window.lang]!=="undefined"?children[x]['name_'+window.lang]:children[x]['name'];html+='<li>';html+='<a class="tdnone block c27 brbott-4 district-choose district_choose'+children[x]['id']+' search-choose" ';html+='data-name="search[district_id]" data-value="'+children[x]['id']+'" data-label="'+nameDist+'" href="#">';html+=nameDist;html+='<span class="counter counterCategory small abs hidden" data-id="'+children[x]['id']+'"></span>';html+='</a>';html+='</li>'};$('ul.suggestinput',$districts).html('');return $(html).appendTo($('ul.suggestinput',$districts))},getCurrentCurrency:function(){var currencySymbol=false,currencyCode=false;if(window.module_currencies){var actualDefaultCurrency=category_id&&currenciesCategories[category_id]?currenciesCategories[category_id]:window.defaultCurrency;for(var z in currencies)if(!geoData.params.currency&&actualDefaultCurrency==z){currencySymbol=currencies[z].symbol;currencyCode=z}else if(geoData.params.currency&&geoData.params.currency==z){currencySymbol=currencies[z].symbol;currencyCode=z}};return currencySymbol?{symbol:currencySymbol,code:currencyCode}:false},initCurrencies:function(){var thiz=this,currencySymbol=thiz.getCurrentCurrency();if(currencySymbol||thiz.isModuleActive('currencies'))$('.numeric-item span.header',thiz.dom.param).each(function(){var $this=$(this),$param=$this.closest('li.param'),key=$param.data('key');if($.inArray(key,window.currencyParams)!=-1){var newLabel=$this.data('defaultLabel');if(currencySymbol){if(newLabel.indexOf(' (')==-1){$this.data('defaultLabelShort',newLabel);newLabel=newLabel+' ('+currencySymbol.symbol+')'}else newLabel=$this.data('defaultLabelShort')+' ('+currencySymbol.symbol+')'}else if($this.data('defaultLabelShort'))newLabel=$this.data('defaultLabelShort');$this.data('defaultLabel',newLabel);!$this.parent().hasClass('fbold')&&$this.html(newLabel)}});return currencySymbol},setSearchParams:function(onlyFreeExchange){var thiz=this;if(!thiz.dom.form.length)return;var searchParams=geoData.params.search;searchParams=searchParams?searchParams:{};if(searchParams.filter_enum_price)if(searchParams.filter_enum_price[0]=='free'){searchParams['filter_float_price:from']='free'}else if(searchParams.filter_enum_price[0]=='exchange')searchParams['filter_float_price:from']='exchange';var districtID=searchParams.district_id;if(districts&&districtID&&districts[city_id]){var $district=$('#param_district'),children=districts[city_id];for(var x in children)if(children[x]['id']==districtID){$('a.button',$district).addClass('fbold').find('span.header').text(children[x]['name']);break}};var currencySymbol=thiz.initCurrencies(),actualDefaultCurrency=currencySymbol&&category_id&&currenciesCategories[category_id]?currenciesCategories[category_id]:window.defaultCurrency;if(currencySymbol&&actualDefaultCurrency!=currencySymbol.code){var $hidden=$('input[name="currency"]',thiz.dom.form);if(!$hidden.length){$hidden=$('<input type="hidden" name="currency" value="'+currencySymbol.code+'" />').appendTo(thiz.dom.form)}else $hidden.val(currencySymbol.code)}else $('input[name="currency"]',thiz.dom.form).remove();$('li.param',thiz.dom.params).each(function(){var $this=$(this),name=$this.data('name'),paramId=parseInt($this.data('paramId')),key=$this.data('key');if(window.searchConditions.values[paramId])for(requiredParamId in window.searchConditions.values[paramId]){var requiredVal=[];$('li.param[data-param-id='+requiredParamId+'] .hidden-option').each(function(){requiredVal.push($(this).val())});if(requiredVal.length==1){requiredVal=requiredVal.pop();if(window.searchConditions.values[paramId][requiredParamId][requiredVal]){$this.show()}else{thiz.unbindSelectParam($this);$this.hide()}}else{thiz.unbindSelectParam($this);$this.hide()}};if(onlyFreeExchange&&key!='price'&&key!='type')return;var $select=$('ul.suggestinput',$this),$labelInput=$('label.num-input input',thiz.dom.params),nameHidden=name.substring(7);nameHidden=nameHidden.substring(0,nameHidden.length-3);var names=[nameHidden];if($this.hasClass('paramFloat'))names=[nameHidden,nameHidden+':from',nameHidden+':to'];for(var x in names)if(searchParams[names[x]]){var label='',$button=$('a.button',$this),hName='search['+names[x]+']',hiddenClass='hidden-option',changeInput=true,labelHuman=searchParams[names[x]];if($this.hasClass('paramSelect')){if(onlyFreeExchange&&searchParams[names[x]]&&searchParams[names[x]][0]!='halftime'&&searchParams[names[x]][0]!='practice')return;if(typeof searchParams[names[x]]!='object')searchParams[names[x]]=[searchParams[names[x]]];searchParams[names[x]]=$.unique(searchParams[names[x]]);for(var z in searchParams[names[x]]){var $suggesInput=$this.find('.suggestinput');if(!$suggesInput.hasClass('binded'))thiz.bindSelectParam($this,$suggesInput);var id=searchParams[names[x]][z].replace(/["'\(\)]/g,"_");if($('#f-'+id+'_'+key).length){if(!$('input[value="'+id+'"][name="'+hName+'[]"]',$this).length)$('<input class="'+hiddenClass+'" type="hidden" name="'+hName+'[]" value="'+id+'">').appendTo($('div.filter-item',$this));var $input=$('#f-'+id+'_'+key,$this);if($input.length){$input.attr('checked','checked');if(label)label+=', ';label+=$input.data("text")}}}}else{if(onlyFreeExchange&&searchParams[names[x]]!=='free'&&searchParams[names[x]]!=='exchange'&&searchParams[names[x]]!=='budget')return;var unit=$select.data('unit');if(names[x].indexOf(':from')!=-1){hiddenClass+=' option-from';if(parseInt(labelHuman)||(names[x+1]&&searchParams[names[x+1]])||(labelHuman==='free'||labelHuman==='exchange'||labelHuman==='budget')){label=thiz.createParameterLabel(thiz.settings.shortFields?'':'od',labelHuman,unit,key);if(currencySymbol&&labelHuman!='free'&&labelHuman!='exchange'&&($.inArray(key,window.currencyparams)!=-1))label+=' ('+currencySymbol.symbol+')';$button=$('a.button.button-from',$this)}}else if(names[x].indexOf(':to')!=-1){hiddenClass+=' option-to';label=thiz.createParameterLabel(thiz.settings.shortFields?'':'do',labelHuman,unit,key);if(currencySymbol&&labelHuman!='free'&&labelHuman!='exchange'&&($.inArray(key,window.currencyParams)!=-1))label+=' ('+currencySymbol.symbol+')';$button=$('a.button.button-to',$this)}else if(key=='certification_status'&&searchParams[names[x]][0]=="certified")$this.find('input').prop('checked',true);$('<input class="'+hiddenClass+'" type="hidden" name="'+hName+'" value="'+searchParams[names[x]]+'">').appendTo($('.filter-both-item',$this))};if(label){$button.closest('.filter-item').addClass('active');$button.addClass('fbold').find('span.header').html(label);$button.find('.icon').addClass('clear mini').removeClass('down')}else{$button.closest('.filter-item').removeClass('active');$button.removeClass('fbold').find('span.header').each(function(){var $s=$(this);$s.html($s.data('defaultLabel'))})};if($this.hasClass('hidden'))$this.removeClass('hidden');if(changeInput)$labelInput.each(function(){var $label=$(this);if($label.data("name")==hName)$label.val(thiz.translateValue(labelHuman))})}});if($('#photo-only').length){var $photoParam=$('#photo-only');if(is_job_cat){$photoParam.parent('.fblock').hide();$photoParam.prop('checked',false)}else $photoParam.parent('.fblock').show()}},categoryChanged:function(categoryID,subcategory,copyAllParams){var thiz=this,$submitButton=$('#search-submit').parent('.button');categoryID=categoryID?categoryID:0;category_id=categoryID;$('li.param:not(.paramsGroup)',thiz.dom.params).remove();if(!subcategory){$('li.subcategory',thiz.dom.params).remove();if(searchSubcategories[categoryID]){var definition=searchSubcategories[categoryID];$subcategory=thiz.createNodeSubcategories(categoryID,definition.search_label,definition.children).appendTo($('#param-grid-1'));$subcategory.closest('.multifilters').addClass('subSelectActive');$submitButton.removeClass('active')}else{thiz.dom.params.find('ul.multifilters').removeClass('subSelectActive');$submitButton.addClass('active')}};var subcategories=searchSubcategories[categoryID]?searchSubcategories[categoryID].children:[],$seekHidden=$('input[name="search[offer_seek]"]',thiz.dom.form),offerSeek=$seekHidden.length&&$seekHidden.val()==='seek'?'seek':'offer';for(var x in parameters){var param=parameters[x],has=false,disabled=false,slotID=1,validSeek=!param.parameter['for']||param.parameter['for']=='both'||param.parameter['for']==offerSeek;if(param.categories[categoryID]&&validSeek){slotID=param.categories[categoryID];has=true}else{var found=0,notFound=0;for(var z in subcategories)if(param.categories[z]){found++}else notFound++;if(found){var diff=Math.round((notFound/found)*100);if(diff<=25&&param.parameter.solr_type!=='float'&&param.parameter.solr_type!=='both'){disabled=true;has=true;if($('#param-grid-1').find('.param').length>0)slotID=6}}};if(has)if(!(thiz.isModuleActive('hide_disabled_parameters')&&disabled))thiz.createNodeFilter(param.parameter,disabled,x).appendTo($('#param-grid-'+slotID))};thiz.dom.params=$('#paramsList');thiz.initFilters();if(copyAllParams){thiz.setSearchParams()}else thiz.setSearchParams(true);thiz.toggleSearchButtonFilters();if(thiz.isModuleActive('courier'))if(courierCategories[categoryID]||!categoryID){$('#courier-only').closest('div').removeClass('hidden')}else $('#courier-only').attr('checked',false).closest('div').addClass('hidden');if(thiz.isModuleActive('safedeal_buyer'))if(courierCategories[categoryID]||!categoryID){$('#safedeal-only').closest('div').removeClass('hidden')}else $('#safedeal-only').attr('checked',false).closest('div').addClass('hidden')},translateValue:function(v){var valueHuman=v;if(valueHuman=='free'){valueHuman='za darmo'}else if(valueHuman=='exchange'){valueHuman='zamienię'}else if(valueHuman=='budget')valueHuman='Price_is_budget';return valueHuman},initCurrencyButtons:function(){var thiz=this;if(thiz.isModuleActive('currencies'))thiz.dom.body.on('click','a.currency-link',function(){var $this=$(this);$('input[name="currency"]',thiz.dom.form).remove();var actualDefaultCurrency=category_id&&currenciesCategories[category_id]?currenciesCategories[category_id]:window.defaultCurrency;if(actualDefaultCurrency!=$this.data('currency'))$hidden=$('<input type="hidden" name="currency" value="'+$this.data('currency')+'" />').appendTo(thiz.dom.form);var $param=$('.numeric-item.price,.numeric-item.salary',thiz.dom.params);$param.find('.suggestinput').removeClass('binded').text('');$param.find('input[type="text"]').val('');$param.closest('li').find('input.hidden-option').remove();$param.find('a.button').removeClass('fbold').find('.icon').removeClass('clear mini').addClass('down');thiz.submitForm(0,true);return false});if(thiz.isModuleActive('adding_currency_converter'))thiz.dom.body.on('click','a.currency-link',function(){var $this=$(this);$('input[name="currency"]',thiz.dom.form).remove();var actualDefaultCurrency=window.defaultCurrency;if(actualDefaultCurrency!=$this.data('currency'))$hidden=$('<input type="hidden" name="currency" value="'+$this.data('currency')+'" />').appendTo(thiz.dom.form);var $param=$('.numeric-item.price,.numeric-item.salary',thiz.dom.params);$param.find('.suggestinput').removeClass('binded').text('');$param.find('input[type="text"]').val('');$param.closest('li').find('input.hidden-option').remove();$param.find('a.button').removeClass('fbold').find('.icon').removeClass('clear mini').addClass('down');thiz.submitForm(0,true);return false})},clearFilters:function(withPriceType){var $paramsBox=$('#paramsList, #searchList'),$filterItems=$('.filter-item',$paramsBox);if(!$filterItems.filter('.price:visible,.filter-item-type:visible').length)withPriceType=true;if(!withPriceType)$filterItems=$filterItems.not('.price,.filter-item-type');$items=$filterItems.not('.category-item');$filterItems.not('.category-item').find('ul.suggestinput label.selected').removeClass('selected');$items.find('ul.suggestinput input:checkbox').attr('checked',false);$items.find('ul.suggestinput input:checkbox.all-checkbox').attr('checked','checked');$items.find('span.header.block').each(function(){var $t=$(this);$t.html($t.data('defaultLabel'))});$filterItems.parent().find('input.hidden-option').remove();$filterItems.not('.category-item').find('input.from, input.to').val('').each(function(){var $s=$(this);$s.val($s.attr('defaultVal'))});$items.find('input.hidden-option').remove();$items.find('a.button').removeClass('fbold').find('.icon').removeClass('clear mini').addClass('down')},initFacets:function($parent){var thiz=this,$bodyContainer=thiz.dom.bodyContainer,facets=$bodyContainer.data('facets')?$bodyContainer.data('facets'):{},categoriesStats=facets.categories?facets.categories:{},showFacets=$bodyContainer.data('showfacets'),$counters=$('span.counterCategory',$parent);if(showFacets){$counters.each(function(){var $this=$(this);if(categoriesStats[$this.data('id')]){$this.html(categoriesStats[$this.data('id')]).removeClass('hidden')}else $this.addClass('hidden')})}else $counters.addClass('hidden')},initClearParams:function(){var thiz=this;thiz.dom.clearParams.click(function(){thiz.clearFilters(true);$(this).addClass('hidden');thiz.submitForm(0);return false})},showClearButtonIfNeeded:function(){var thiz=this;if(($('li.param',thiz.dom.params).find('a.button.fbold').size()&&window.is_search_category!=='1')||$('#courier-only:checked').size()||$('#safedeal-only:checked').size()){thiz.dom.clearParams.removeClass('hidden')}else thiz.dom.clearParams.addClass('hidden')},initSearchOptions:function(){var thiz=this;$('#photo-only, #title-desc, #courier-only, #safedeal-only').bind('change',function(){thiz.submitForm()})},unbindSelectParam:function($li){var paramId=$li.data('paramId');$li.find('.icon.clear').click();$suggesInput=$li.find('.suggestinput');$suggesInput.removeClass('binded');$suggesInput.html('');$suggesInput.hide();for(dependingParamId in window.searchConditions.values)if(paramId in window.searchConditions.values[dependingParamId])this.unbindSelectParam($('li.param[data-param-id='+dependingParamId+']'))},bindSelectParam:function($li,$suggesInput){var thiz=this;$suggesInput.addClass('binded');var paramId=$li.data('paramId'),key=$li.data('key'),name=$li.data('name');for(var x in window.searchValues){var keys=window.searchValues[x]['k'],categories=window.searchValues[x]['c'];if(keys[key]&&categories[category_id]){var values=window.searchValues[x]['v'];if(paramId in window.searchConditions.values){for(requiredParamId in window.searchConditions.values[paramId]){var requiredVal=[];$('li.param[data-param-id='+requiredParamId+'] .hidden-option').each(function(){requiredVal.push($(this).val())});if(requiredVal.length==1){requiredVal=requiredVal.pop();var allowedOptions=window.searchConditions.values[paramId][requiredParamId][requiredVal];if(typeof allowedOptions!='undefined'){var filteredValues={};for(var i=0;i<allowedOptions.length;i++)filteredValues[allowedOptions[i].key]=allowedOptions[i].value;thiz.createNodeSelectValues(key,name,filteredValues,$suggesInput)}}}}else thiz.createNodeSelectValues(key,name,values,$suggesInput)}};$('.select-only-this-opiton',$suggesInput).bind('click',function(e){var $thiz=$(this),$parent=$thiz.closest('div.filter-item'),$header=$parent.find('span.header'),$aButton=$parent.find('a.button'),$bothFiltersDiv=$thiz.closest('div.filter-item');$bothFiltersDiv.find('input.hidden-option').remove();$thiz.closest('ul').find('li input[type="checkbox"]').each(function(){var $checkbox=$(this);if($checkbox.data("value")!=$thiz.data("value")){$checkbox.removeAttr('checked').change()}else{$checkbox.attr('checked','checked').change();$bothFiltersDiv.append('<input class="hidden-option" type="hidden" name="'+$thiz.data("name")+'" value="'+$thiz.data("value")+'">')}});$header.html($thiz.data("text"));$aButton.addClass('fbold').find('.icon').addClass('clear mini').removeClass('down hidden');for(dependingParamId in window.searchConditions.values)if(paramId in window.searchConditions.values[dependingParamId])thiz.unbindSelectParam($('li.param[data-param-id='+dependingParamId+']'));thiz.dom.params.find('.suggestinput').hide();thiz.submitForm(100)});$('input[type="checkbox"]',$suggesInput).bind('click',function(e){var $thiz=$(this);e.stopPropagation();var $bothFiltersDiv=$thiz.closest('div.filter-item'),$header=$bothFiltersDiv.find('span.header'),$aButton=$bothFiltersDiv.find('a.button');if($thiz.hasClass('all-checkbox')){$header.html($header.data('defaultLabel'));$bothFiltersDiv.find('input.hidden-option').remove();$thiz.closest('ul').find('li input[type="checkbox"]').filter(':checked').each(function(){$(this).removeAttr('checked').change()});$thiz.attr('checked','checked').change();$aButton.removeClass('fbold').find('.icon').removeClass('clear mini').addClass('down')}else{var text=new Array(),options=new Array(),checked=0;$thiz.closest('ul').find('li input[type="checkbox"]').filter(':checked').each(function(){var $t=$(this);if($t.hasClass('all-checkbox')){$t.removeAttr('checked').change()}else{checked++;$t.attr('checked','checked').change()};if($t.data("text")){text.push($t.data("text"));options.push($t.data("value"))}});if(checked==0)$thiz.closest('ul').find('li input[type="checkbox"].all-checkbox').attr('checked','checked').change();$header.html(!text.length?$header.data('defaultLabel'):text.join(', '));$bothFiltersDiv.find('input.hidden-option').remove();for(i in options)$bothFiltersDiv.append('<input class="hidden-option" type="hidden" name="'+$thiz.data("name")+'" value="'+options[i]+'">');if(options.length>0){$aButton.addClass('fbold').find('.icon').addClass('clear mini').removeClass('down hidden')}else $aButton.removeClass('fbold').find('.icon').removeClass('clear mini').addClass('down hidden')};thiz.submitForm(600)})},initFilters:function(){var thiz=this,$filterItems=$('.filter-item',thiz.dom.params),timerID=null;$filterItems.mouseleave(function(){var $this=$(this);timerID=window.setTimeout(function(){$this.find('.suggestinput').hide();$this.removeClass('filterActive');$('input.max-value-input:visible, input.min-value-input:visible, a.button:visible',thiz.dom.params).each(function(){var $divFilterItem=$(this).closest('div.filter-item, div.filter-both-item');$divFilterItem.find('a.button').removeClass('hidden');$divFilterItem.find('label.num-input').addClass('hidden');$divFilterItem.find('.suggestinput').hide()})},500)}).mouseenter(function(){if(timerID!=null)window.clearTimeout(timerID)});if(!thiz.isTouchDevice())$('ul.suggestinput, ul.numeric-suggest',thiz.dom.params).bind('mousewheel DOMMouseScroll',function(e){var $this=$(this);if($this.get(0).scrollHeight>$this.height()){var scrollTo=null;if(e.type=='mousewheel'){scrollTo=(e.originalEvent.wheelDelta*-1)}else if(e.type=='DOMMouseScroll')scrollTo=40*e.originalEvent.detail;if(scrollTo){e.preventDefault();$this.scrollTop(scrollTo+$this.scrollTop())}};e.stopPropagation()});var $buttons=$('a.button',$filterItems).bind('click touchstart',function(){var $this=$(this),$li=$this.closest('li');if($li.hasClass('disabled'))return false;thiz.fakeClick=$this.hasClass('fakeClick');$filterItems.each(function(){var $t=$(this);$t.find('.suggestinput').hide();$t.removeClass('filterActive');$t.find('a.button').removeClass('hidden');$t.find('label.num-input').addClass('hidden')});$this.siblings('.numeric-suggest').hide();thiz.dom.categoryList.hide();var $suggesInput=$this.siblings('.suggestinput');if($suggesInput.is(':visible')){$suggesInput.hide()}else{if(!$suggesInput.hasClass('binded')){$suggesInput.addClass('binded');if($suggesInput.hasClass('districts')){var children=districts[city_id],$districts=thiz.careteNodesDistricts($li,children);$('a.district-choose',$districts.parent()).click(function(){var $this=$(this),$aButton=$this.closest('div.filter-item').find('a.button'),id=$this.data("value");$('input[name="search[district_id]"]').val(id);$this.closest('div.filter-item').find('.suggestinput').hide();$aButton.addClass('fbold');if($this.attr('id')=='all-categories'){$aButton.removeClass('fbold').find('span.header').text('Dzielnica');$this.closest('div.filter-item').find('.subSelect').removeClass('hidden')}else{$this.closest('div.filter-item').find('.subSelect').addClass('hidden');$aButton.find('span.header').text($this.data("label"))};thiz.submitForm(50);return false})}else if($suggesInput.hasClass('subcategories')){var children=searchSubcategories[category_id]?searchSubcategories[category_id].children:searchSubcategories[$suggesInput.find('#all-categories').data("value")].children,$subcategories=thiz.careteNodesSubcategories($li,children);thiz.initFacets($subcategories);$('a.category-choose',$subcategories.parent()).click(function(){var $this=$(this),$aButton=$this.closest('div.filter-item').find('a.button'),$submitButton=$('#search-submit').parent('.button'),id=$this.data("value");$('#searchFormCatID').val(id);$('li.param a.button.fbold',thiz.dom.params).removeClass('fbold');var $cloned=$this.clone();$cloned.find('span').remove();$this.closest('div.category-item').find('span.3rd-category-choose-label').text($cloned.text());$cloned.remove();$this.closest('div.filter-item').find('.suggestinput').hide();$aButton.addClass('fbold');$submitButton.addClass('active');if($this.attr('id')=='all-categories'){$aButton.removeClass('fbold');$submitButton.removeClass('active');$this.closest('div.filter-item').find('.subSelect').removeClass('hidden')}else $this.closest('div.filter-item').find('.subSelect').addClass('hidden');$('input[name="search[offer_seek]"]',thiz.dom.form).remove();thiz.categoryChanged(id,true,true);thiz.submitForm(50);return false})}else if($suggesInput.hasClass('select')){thiz.bindSelectParam($li,$suggesInput)}else if($suggesInput.hasClass('range')){var key=$li.data('key'),name=$li.data('name'),catID=category_id?category_id:0,has=false;for(var x in window.searchRanges){var ranges=window.searchRanges[x],keys=ranges.k,categories=ranges.c;if(keys[key]&&categories[catID]){has=true;break}};if(!has)catID=0;for(var x in window.searchRanges){var ranges=window.searchRanges[x],keys=ranges.k,categories=ranges.c;if(keys[key]&&categories[catID]){var rangeKey='v',currencySymbol=thiz.getCurrentCurrency(),label=ranges.s[key];if(window.module_currencies)if($.inArray(key,window.currencyParams)!=-1){if(!currencySymbol)currencySymbol={code:defaultCurrency,symbol:currencies[defaultCurrency]['symbol']};if(ranges['v_'+currencySymbol.code])rangeKey='v_'+currencySymbol.code;if(currencySymbol.symbol){label=currencySymbol.symbol;$suggesInput.data('unit',currencySymbol.symbol)}};if(ranges[rangeKey]){var values=ranges[rangeKey].split(',');thiz.createNodeRanges(label,name,values,$suggesInput)};break}};$this.find('div.filter-item-to').find('li.free-or-exchange-option').remove();$('a.search-choose',$suggesInput).click(function(){var $this=$(this),$item=$this.closest('div.filter-item'),$li=$item.closest('li.param'),key=$li.data('key'),$select=$item.find('ul.suggestinput'),$input=$item.find('input.min-value-input, input.max-value-input'),$header=$item.find('span.header'),$aButton=$item.find('a.button'),$bothFiltersDiv=$this.closest('div.filter-both-item');$input.val(thiz.translateValue($this.data("value"))).removeClass('ca2');$bothFiltersDiv.find('input.hidden-option.option-free-ex').remove();var $from=$bothFiltersDiv.find('input.hidden-option.option-from'),$to=$bothFiltersDiv.find('input.hidden-option.option-to'),unit=$this.data('unit');if($input.hasClass('from')){$bothFiltersDiv.find('input.hidden-option.option-from').remove();$bothFiltersDiv.append('<input class="hidden-option option-from" type="hidden" name="'+$input.data("name")+'" value="'+$this.data("value")+'">');$header.html(thiz.createParameterLabel(thiz.settings.shortFields?'':'od',$this.data("value"),unit,key))}else{$bothFiltersDiv.find('input.hidden-option.option-to').remove();$bothFiltersDiv.append('<input class="hidden-option option-to" type="hidden" name="'+$input.data("name")+'" value="'+$this.data("value")+'">');$header.html(thiz.createParameterLabel(thiz.settings.shortFields?'':'do',$this.data("value"),unit,key))};if($from.val()=='exchange'){$to.remove();$select.find('input.to').val('')};$aButton.addClass('fbold').find('.icon').addClass('clear mini').removeClass('down');var $divFilterItem=$this.closest('div.filter-item');$divFilterItem.find('a.button').removeClass('hidden');$divFilterItem.find('label.num-input').addClass('hidden');thiz.dom.params.find('.suggestinput').hide();thiz.submitForm(10)});$('input.max-value-input, input.min-value-input',$li).keydown(function(e){var $this=$(this);if($this.val()=='wpisz...'){$this.val('');$this.removeClass('ca2')};if(thiz.isModuleActive('float_filter_engine')&&$this.attr('class').indexOf('filter_float_motor_engine_size')!==-1)return true;if(e.keyCode>=96&&e.keyCode<=105){var val=parseInt($this.val());if(val>999999999999)return false;return true};if(e.keyCode==46||e.keyCode==8||(e.keyCode>=48&&e.keyCode<=57))return true;if(e.keyCode==13){thiz.dom.params.find('.suggestinput').hide();return true};if($this.val().length>13)return false;var datePattern=/float_year/;if(datePattern.test($this.data("name"))&&$this.val().length>=4)return false;var v=String.fromCharCode(e.keyCode);if(!/\d/.test(v))return false}).keyup(function(e){var $this=$(this),val=$this.val(),$select=$this.closest('div.filter-item').find('ul.suggestinput'),pricePattern=/float_price/;if(val=='0'&&$this.hasClass('from')&&pricePattern.test($this.data("name")))val='free';var $input=$this,$parent=$this.closest('div.filter-item'),$li=$parent.closest('li.param'),key=$li.data('key'),$header=$parent.find('span.header'),$aButton=$parent.find('a.button'),$bothFiltersDiv=$this.closest('div.filter-both-item'),unit=$select.data('unit');$bothFiltersDiv.find('input.hidden-option.option-free-ex').remove();if($input.hasClass('from')){$bothFiltersDiv.find('input.hidden-option.option-from').remove();$bothFiltersDiv.append('<input class="hidden-option option-from" type="hidden" name="'+$this.data("name")+'" value="'+val+'">');var textFrom=thiz.createParameterLabel(thiz.settings.shortFields?'':'od',val,unit,key);$header.html(textFrom)}else{$bothFiltersDiv.find('input.hidden-option.option-to').remove();$bothFiltersDiv.append('<input class="hidden-option option-to" type="hidden" name="'+$this.data("name")+'" value="'+val+'">');var textTo=thiz.createParameterLabel(thiz.settings.shortFields?'':'do',val,unit,key);$header.html(textTo)};var $from=$bothFiltersDiv.find('input.hidden-option.option-from'),$to=$bothFiltersDiv.find('input.hidden-option.option-to');if($input.val()){$aButton.addClass('fbold').find('.icon').addClass('clear mini').removeClass('down')}else $aButton.removeClass('fbold').find('.icon').removeClass('clear mini').addClass('down');if(val!=='')thiz.submitForm(1200)}).blur(function(e){var $this=$(this),$divFilterItem=$this.closest('div.filter-item');$divFilterItem.find('a.button').removeClass('hidden');$divFilterItem.find('label.num-input').addClass('hidden');var $s=$divFilterItem.find('span.header');if(!$this.val()||$this.val()=='wpisz...'||$this.val()==$this.attr('defaultval')){$s.html($s.data('defaultLabel'));$s.closest('a.button').removeClass('fbold')}})}};if(!thiz.fakeClick){$suggesInput.css('maxHeight','');var defaultMaxHeight=$suggesInput.css('maxHeight').replace('px',''),viewportMaxHeight=$(window).height()-$this.offset().top-60;$suggesInput.css({maxHeight:defaultMaxHeight>viewportMaxHeight?defaultMaxHeight:viewportMaxHeight}).show().removeClass('hidden')}};$this.parent('.filter-item').addClass('filterActive');if($suggesInput.hasClass('numeric-suggest')){var $divFilterItem=$this.closest('div.filter-item');$divFilterItem.find('a.button').addClass('hidden');$divFilterItem.find('label.num-input').removeClass('hidden');$input=$divFilterItem.find('label.num-input input');if($input.val()==$input.attr('defaultval'))$input.val('');if($input.val()==''){!thiz.settings.shortFields&&$input.val('wpisz...');$input.addClass('ca2');$input.setSelection(0,0)}else if($input.val()=='wpisz...'){$input.setSelection(0,0)}else{var inputLength=$input.val().length;$input.setSelection(inputLength,inputLength)}};return false});$('.icon',$buttons).bind('click touchstart',function(){var $this=$(this);if($this.hasClass('clear')){$this.removeClass('clear mini').addClass('down');var $button=$this.closest('a.button');$button.removeClass('fbold');var $header=$('span.header',$button);$header.html($header.data('defaultLabel'));var name=$this.closest('div.filter-item').find('input').val('').data("name");if(name){var $item=$button.closest('li.param');$item.find('input.hidden-option[name="'+name+'"]').remove()}else{var $item=$this.closest('div.filter-item');$item.find('input.hidden-option').remove();$item.find('ul.suggestinput input[type="checkbox"]').removeAttr('checked').change().filter('.all-checkbox').attr('checked','checked')};var paramId=$this.closest('li.param').data('paramId');for(dependingParamId in window.searchConditions.values)if(paramId in window.searchConditions.values[dependingParamId])thiz.unbindSelectParam($('li.param[data-param-id='+dependingParamId+']'));thiz.submitForm(50);return false}});$('input[type="text"]',$filterItems).focus(function(){$this=$(this);if($this.val()==$this.attr('defaultval'))$this.val('')}).blur(function(){$this=$(this);if($this.val()==''||$this.val()==$this.attr('defaultval'))$this.val($this.attr('defaultval'))})},useAjax:function(){return true},formatNumber:function(number,decimals){return number;var s=number<0?'-':'',i=parseInt(number=Math.abs(+number||0).toFixed(decimals))+'',j=(j=i.length)>3?j%3:0;return s+(j?i.substr(0,j)+thousands_separator:'')+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+thousands_separator)+(decimals?decimal_separator+Math.abs(number-i).toFixed(decimals).slice(2):'')},initFavSearchTooltip:function(){var $tooltip=$('.js-add-fav-search-tooltip');if($tooltip.length>0&&$.cookie('searchFavTooltip')===null){function saveTooltipCookie(){$.cookie('searchFavTooltip','1',{expires:'',path:'/',domain:'.'+session_domain})};function showTooltip(){if($.cookie('searchFavTooltip')===null){var shouldShowTooltip=true;if($('#searchFormCatID').val()=='')shouldShowTooltip=false;if($('.autosuggest-geo-input').val()==''&&$('.autosuggest-geo-input-region').val()=='')shouldShowTooltip=false;if(shouldShowTooltip){$tooltip.delay(1e3).fadeIn(300,function(){$tooltip.delay(6e3).fadeOut(300)});saveTooltipCookie()}}};$('#searchFormCatID').change(function(){showTooltip()});$('#cityField').blur(function(){showTooltip()});showTooltip()}}});AdsClass=AbstractSearchFiltersClass.extend({init:function(){this._super();this.initDom();this.initLocation();this.init404();this.initPrevNext();this.initSkyscraper();this.initScreening();this.initAdListingTopFixed();this.initBannersScreening();this.initFooterCategories();this.initGoToTop();this.initFavoritesGalleryBox();this.initAdsense(false);this.initScreenSize();this.initPopState();this.initPager();this.initTabs();this.initViewButtons();this.initTopLinks();this.initSubmit();this.initSeoLocationsFooter();this.initChatBox();this.initFavouritesBar();this.initJobsBadge(category_id);this.initFixlyBadge(category_id);this.initRealEstateBadge(category_id);if($.inArray(sitecode,['olxpt'])>-1)this.initLocationInfo();if(typeof NinjaTracker!=='undefined')this.initNinjaAdImpressions()},initDom:function(){var dom={form:$('#mainTopSearch'),adsContainer:$('#listContainer'),headerContainer:$('#header-container'),bodyContainer:$('#body-container'),params:$('#paramsList'),body:$('body'),categoryHidden:$('#searchFormCatID'),categoryList:$('ul#categorySelectList'),clearParams:$('#clear-params'),searchList:$('#searchList')};dom.qInput=$('#search-text',dom.form);dom.regionInput=$('#cityField',dom.form);dom.distanceSelect=$('#distanceSelect',dom.form);this.dom=dom},initFooterCategories:function(){var $categoriesHeader=$('#categoryLinksHeader'),$categoriesDivs=$('div',$('#categoryLinksSections')).hide();$('li',$categoriesHeader).click(function(){var $this=$(this);$('li.active',$categoriesHeader).removeClass('active fbold');$this.addClass('active');$categoriesDivs.filter('.active').removeClass('active').hide();$('#'+$this.attr('id')+'Section').addClass('active').show()})},escapeHtml:function(text){return text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},initFavouritesBar:function(){var $favBar=$('#favouritesBar'),$favBarSave=$('#favouritesBarSave'),$favBarClose=$('#favouritesBarClose'),$favParams=$('#favouritesBarParams'),$queryField=$('#search-text'),$locationField=$('#cityField'),$distanceField=$('#distanceSelect'),$subcatField=$('.3rd-category-choose-label','#param_subcat'),listingTop=($('.listHandler').length?$('.listHandler').offset().top:0)+600,catId=window.category_id,params=window.parameters,parametersLength=typeof window.parameters==='object'?Object.keys(window.parameters).length:'',paramItem='',paramItemName='',paramItemNameFrom='',paramItemNameFromShow='',paramItemNameTo='',paramItemNameToShow='',numericParamName='',favbarShown=false,getURLParameter=function(sParam){var sPageURL=window.location.search.substring(1),sURLVariables=sPageURL.split('&');for(var i=0;i<sURLVariables.length;i++){var sParameterName=sURLVariables[i].split('=');if(sParameterName[0]==sParam)return sParameterName[1]}};window.favbarEnable=true;if(root_category_id.length<1){$favBar.addClass('hidden').removeClass('down');return};$('.favourites-bar__param',$favParams).remove();$('.favourites-bar__param-query',$favParams).text('');$('.favourites-bar__param-subcat',$favParams).remove();$('.favourites-bar__param-location',$favParams).remove();for(var i=0;i<parametersLength;i++)if(params[i].categories.hasOwnProperty(catId)){paramItem=$('[data-param-id="'+params[i].parameter.id+'"]');paramItemName=paramItem.find('.header').text();if(params[i].parameter.isNumeric===1){paramItemNameFrom=paramItem.find('.filter-item-from .header').text();paramItemNameTo=paramItem.find('.filter-item-to .header').text();if(paramItemNameFrom!==paramItem.find('.filter-item-from .header').data('default-label')){paramItemNameFromShow=paramItemNameFrom}else paramItemNameFromShow='';if(paramItemNameTo!==paramItem.find('.filter-item-to .header').data('default-label')){paramItemNameToShow=paramItemNameTo}else paramItemNameToShow='';numericParamName=paramItemNameFromShow+(paramItemNameFromShow!==''?' ':'')+paramItemNameToShow;if(numericParamName.length)$('<li class="favourites-bar__param" data-icon="circle_tick">'+this.escapeHtml(numericParamName)+'</li>').appendTo($favParams)}else if(paramItem.find('.button').hasClass('fbold'))$('<li class="favourites-bar__param" data-icon="circle_tick">'+this.escapeHtml(paramItemName)+'</li>').appendTo($favParams)};if($queryField.val()!==$queryField.attr('defaultval'))$('.favourites-bar__param-query',$favParams).html('<strong>"'+this.escapeHtml($queryField.val())+'"</strong>');$('.favourites-bar__param-category',$favParams).text($('#main-category-choose-label').text());if($subcatField.length&&$('.subSelect').hasClass('hidden'))$('<li class="favourites-bar__param-subcat" data-icon="circle_tick">'+$subcatField.text()+'</li>').insertAfter('.favourites-bar__param-category');if($locationField.val()!==$locationField.attr('defaultval'))$('<li class="favourites-bar__param-location" data-icon="location-filled">'+this.escapeHtml($locationField.val()+' '+$distanceField.find('.label').text())+'</li>').insertAfter('.favourites-bar__param-query');$(window).unbind('scroll.favouritesBar').bind('scroll.favouritesBar',function(e){if($favBar.length&&$.cookie('favouritesBar')===null){if(typeof getURLParameter('page')==='undefined'||getURLParameter('page')<2||root_category_id.length<1){$favBar.addClass('hidden').removeClass('down');window.favbarEnable=false}else $favBar.removeClass('hidden');if(window.favbarEnable===true){$favBar.removeClass('hidden').toggleClass('down',($(window).scrollTop()>listingTop));if(!favbarShown&&$(window).scrollTop()>listingTop){if(typeof NinjaTracker!=='undefined'&&!favbarShown)NinjaTracker.push(NinjaTracker.mergeValidOptionalParams(NinjaTracker.getDataFrom(trackingData.pageView),{trackEvent:['favourite_search_save_banner_show'],action_type:'favourite_search_save_banner_show'}));favbarShown=true}}else $favBar.addClass('hidden').removeClass('down')}});$favBarSave.unbind().bind('click',function(e){e.preventDefault();ObserveObject.addSearchToObserved($('#searchCriteria').html(),$(this).attr('id'),false);$favBar.addClass('hidden').removeClass('down')});$favBarClose.click(function(e){e.preventDefault();$favBar.addClass('hidden').removeClass('down');$.cookie('favouritesBar','1',{expires:'',path:'/',domain:'.'+session_domain})})},init404:function(){if(window.location.href.indexOf('#from404')>0)$('#topmessages').append($('#ad-not-available-box').show())},initPager:function(){var thiz=this,$pageParam=$('#pageParam');if($pageParam.length>0){$pageParam.val($pageParam.data("currentPage"));var $hidden=$('#pageHidden',thiz.dom.form);if(!$hidden.length)$hidden=$('<input type="hidden" id="pageHidden" name="page" />').appendTo(thiz.dom.form).val($pageParam.val())};thiz.dom.body.on('keydown','#pageParam',function(e){var code=e.keyCode||e.which,accepted_special_keys=[13,46,37,39,8],special_key_pressed=false;for(var i=0;i<accepted_special_keys.length;i++)if(accepted_special_keys[i]==code)special_key_pressed=true;if((special_key_pressed||e.ctrlKey||(/\d/.test(String.fromCharCode((96<=code&&code<=105)?code-48:code))&&!e.shiftKey))){if($('#pageParam').val()==''&&code=='48')return false;return true};return false});if(window.is_archive!=1)$('div.pager a').click(function(){var $this=$(this),page=$this.hasClass('pageNextPrev')?parseInt($this.data("page")):parseInt($('span',$this).text());if(!page||isNaN(page))page=parseInt($this.parent().prev().find('a span').text());var $hidden=$('#pageHidden',thiz.dom.form);if(!$hidden.length)$hidden=$('<input type="hidden" id="pageHidden" name="page" />').appendTo(thiz.dom.form);$hidden.val(page);$('html, body').scrollTop(0);thiz.submitForm(100,true);return false});$('#showAllLocations').click(function(){$(this).next('.all-locations').removeClass('hidden');$(this).remove()})},initPrevNext:function(){var thiz=this;if(window.searchID!=undefined&&window.searchID!='')$('a.linkWithHash',thiz.dom.adsContainer).each(function(){var $this=$(this),hash='#'+window.searchID;if($this.hasClass('linkWithHashPromoted'))hash+=';promoted';if($.browser.webkit&&!$this.hasClass('thumb'))$this.addClass('refreshWebkit');$this.attr('href',$this.attr('href')+hash)});if(window.location.hash.indexOf('ad_id=')>=0){var ad_id=window.location.hash.substring(1).replace('ad_id=','');if(!isNaN(ad_id)){var $ad=$('.ad_id'+ad_id+':first');if($ad.length>0)$('html, body').animate({scrollTop:$ad.offset().top},100)}}},maxPosition:function(){var skycraperMax=$('#skycraperMax');if(skycraperMax.length){return skycraperMax.offset().top}else{var favoritesGalleryBox=$('#footer-container');if(favoritesGalleryBox.length)return favoritesGalleryBox.offset().top};return window.innerHeight},initSkyscraper:function(){var thiz=this,$skycraper=$('#skycraper');if($skycraper.length){var topSkycraper=$skycraper.offset().top;$(window).load(function(){topSkycraper=$skycraper.offset().top});if($.browser.webkit)$skycraper.css('minHeight','1px');window.addEventListener("slotHasRendered",setSkycraperOffsetTopOnSlotRenderedOnce);function setSkycraperOffsetTopOnSlotRenderedOnce(event){var renderedSlotId=event.detail.slot.getSlotElementId(),$renderedSlot=$('#'+renderedSlotId),isSkycraper=$renderedSlot.closest('#skycraper').length;if(isSkycraper){topSkycraper=$skycraper.offset().top;window.removeEventListener("slotHasRendered",setSkycraperOffsetTopOnSlotRenderedOnce)}};function skycraperPosition(event){$document=$(document);var ySkycraper=thiz.isTouchDevice()?Math.abs($('html').position().top):Math.abs($document.scrollTop()),xSkycraper=thiz.isTouchDevice()?Math.abs($('html').position().left):Math.abs($document.scrollLeft());if(!$skycraper.hasClass('fix')&&(ySkycraper<=topSkycraper))topSkycraper=$skycraper.offset().top;if(ySkycraper>=topSkycraper){var positionContent=$('#body-container .content').offset(),widthContent=$('#body-container .wrapper').width(),listHandler=$('#body-container .wrapper .listHandler').width(),paddingRightContent=widthContent-(listHandler||0);if(thiz.isModuleActive('olx_redesign'))widthContent=widthContent-paddingRightContent;var skyOffset=0,maxPosition=thiz.maxPosition()-$skycraper.height()-190;if(typeof maxPosition!=='undefined'&&ySkycraper>maxPosition){$skycraper.removeClass('fix').addClass('abs').css({left:0,top:maxPosition-topSkycraper}).parent().addClass('abs')}else $skycraper.removeClass('abs').addClass('fix').css({left:positionContent.left+widthContent+(thiz.isModuleActive('olx_redesign')?24:10)-xSkycraper-skyOffset,top:0}).parent().removeClass('abs')}else $skycraper.removeClass('fix').css({left:'auto',top:0}).parent().addClass('abs')};if(!thiz.isModuleActive('olx_redesign'))skyCheck=setTimeout(function(){if($skycraper.is(':visible')&&!$('body').hasClass('.bgadriver')){function countWidth(){var windowWidth=$(window).width();if(windowWidth<1130){$('body').css('margin-left',-148).addClass('bodyIndent');$('#innerLayout').css('min-width',1240)}else{$('body').css('margin-left','').removeClass('bodyIndent');$('#innerLayout').css('min-width','auto')}};countWidth();$(window).resize(function(){countWidth()})}},2e3);if($('.criteoStickyDisabled:visible').length>0){$skycraper.addClass('abs');$skycraper.css('top',$('#offers_table').position().top+'px')};function shouldAllowSticky(){if(typeof window.module_adblock_targeting_new!=='undefined'&&window.abp)return false;var stickyDisabled=$skycraper.find('.stickyDisabled').length>0,criteoStickyDisabled=stickyDisabled?true:$('.criteoStickyDisabled:visible').length>0;return!(stickyDisabled||criteoStickyDisabled)};$(window).scrolled(10,function(){shouldAllowSticky()&&skycraperPosition()});$(window).resize(function(){shouldAllowSticky()&&skycraperPosition()})}},initScreening:function(){var $banner=$('.fullscreen-banner');if($banner.length){var $document=$(document),topBanner=$banner.offset().top;function fixBanner(){var yScroll=Math.abs($document.scrollTop());if(yScroll>=topBanner){$banner.addClass('fix').css('top',0)}else $banner.removeClass('fix').css('top','')};fixBanner();$(window).scroll(function(){fixBanner()});$(window).resize(function(){fixBanner()})}},initAdListingTopFixed:function(){var $adListingTopFixed=$('#div-gpt-ad-listing-top'),$adListingTopContainer=$('#div-gpt-ad-listing-top-container');if($adListingTopContainer.length>0){var $document=$(document),elementTop=$adListingTopContainer.offset().top;function fixOnViewport(){var yScroll=Math.abs($document.scrollTop()),adListingTopFixedNotHidden=!$adListingTopFixed.is(':hidden');if(yScroll>=elementTop&&adListingTopFixedNotHidden){$adListingTopContainer.css('height',$adListingTopContainer.height());$adListingTopFixed.addClass('fix')}else{$adListingTopContainer.css('height','');$adListingTopFixed.removeClass('fix')}};fixOnViewport();$(window).scroll(function(){fixOnViewport()})}},initBannersScreening:function(){var thiz=this;window.$rightBanner=$('.screening-right-banner').find('.stickyEnabled');window.$leftBanner=$('.screening-left-banner').find('.stickyEnabled');if(window.$leftBanner.length||window.$rightBanner.length){var $document=$(document),$bodyContainer=$('#body-container .content'),topBanners=getStickyBannerOffsetTop(),skyScrapperMaxPosition=thiz.maxPosition()+150;$(window).load(function(){topBanners=getStickyBannerOffsetTop();skyScrapperMaxPosition=thiz.maxPosition()+150});window.addEventListener("slotHasRendered",setBannerOffsetTopOnSlotRenderedOnce);function setBannerOffsetTopOnSlotRenderedOnce(event){var renderedSlotId=event.detail.slot.getSlotElementId(),$renderedSlot=$('#'+renderedSlotId),isAnyStickyBanner=($renderedSlot.is($rightBanner)||$renderedSlot.is($leftBanner));if(isAnyStickyBanner){topBanners=getStickyBannerOffsetTop();window.removeEventListener("slotHasRendered",setBannerOffsetTopOnSlotRenderedOnce)}};function getStickyBannerOffsetTop(){var bodyContainerOffsetTop=$bodyContainer.offset().top,leftBannerOffsetTop=window.$leftBanner.length?window.$leftBanner.offset().top:0,rightBannerOffsetTop=window.$rightBanner.length?window.$rightBanner.offset().top:0;return Math.max(leftBannerOffsetTop,rightBannerOffsetTop,bodyContainerOffsetTop)};function getAnyStickyBanner(){return window.$rightBanner||window.$leftBanner};function fixBanners(){if(typeof window.module_adblock_targeting_new!=='undefined'&&window.abp)return;var $anyStickyBanner=getAnyStickyBanner(),yScroll=thiz.isTouchDevice()?Math.abs($('html').position().top):Math.abs($document.scrollTop());if($anyStickyBanner&&!$anyStickyBanner.hasClass('fix')&&(yScroll<=topBanners))topBanners=getStickyBannerOffsetTop();skyScrapperMaxPosition=thiz.maxPosition()+150;if(yScroll>=topBanners){var positionContent=$('#body-container .content #offers_table').offset(),widthContent=$('#body-container .wrapper').width(),listHandler=$('#body-container .wrapper .listHandler').width(),paddingRightContent=widthContent-(listHandler||0);if(thiz.isModuleActive('olx_redesign'))widthContent=widthContent-paddingRightContent;var contentEmpty=$('#body-container .emptynew'),leftCorrection=(thiz.isModuleActive('olx_redesign')?24:10);if(positionContent===null&&contentEmpty.length)positionContent=contentEmpty.offset();var gallerywide=$('#gallerywide');if(positionContent===null&&gallerywide.length){positionContent=gallerywide.offset();widthContent=gallerywide.outerWidth();leftCorrection=0};var leftWidth=0,rightTop=0,leftTop=0;if(yScroll>skyScrapperMaxPosition-window.$rightBanner.height())rightTop=skyScrapperMaxPosition-window.$rightBanner.height()-yScroll;if(yScroll>skyScrapperMaxPosition-window.$leftBanner.height())leftTop=skyScrapperMaxPosition-window.$leftBanner.height()-yScroll;if(window.$leftBanner.length){$.each(window.$leftBanner,function(){var width=$(this).width();if(leftWidth<width)leftWidth=width;if(leftWidth===0)leftWidth=150});window.$leftBanner.addClass('fix').css({left:positionContent.left-leftWidth-leftCorrection,top:leftTop})};if(window.$rightBanner.length)window.$rightBanner.addClass('fix').css({left:positionContent.left+widthContent+(thiz.isModuleActive('olx_redesign')?24:10),top:rightTop})}else{window.$leftBanner.length&&window.$leftBanner.removeClass('fix').css('left','');window.$rightBanner.length&&window.$rightBanner.removeClass('fix').css('left','')}};fixBanners();$(window).scrolled(10,function(){fixBanners()});$(window).resize(function(){fixBanners()})}},setSearchId:function(){if($.cookie('search_id_md5')!=='clear'){sessionStorage.setItem('search_id_md5',$.cookie('search_id_md5'))}else sessionStorage.removeItem('search_id_md5')},initLocation:function(){var thiz=this,cityIDOld=window.city_id,regionIDOld=window.region_id;thiz.dom.regionInput.geosuggest({saveAsDefaultLocationInCookie:true,saveAsLastLocationInCookie:true,loadLastLocationsFromCookie:true,loadDefaultLocationFromCookie:(window.city_id==undefined||window.city_id=='')&&(window.region_id==undefined||window.region_id=='')?true:false,distanceSelect:thiz.dom.distanceSelect,citiesOld:window.module_cities_old===1,locationChanged:function(text,regionID,cityID,districtID,distance,byUser){thiz.cityRegionChanged=regionID!=regionIDOld||cityID!=cityIDOld;if(cityIDOld==''&&cityID==''&&regionIDOld==''&&regionID=='')return;cityIDOld=cityID;regionIDOld=regionID;byUser&&thiz.submitForm(10);if(districts){var $district=$('#param_district');if(cityID&&districts[cityID]){$district.find('a.button').removeClass('fbold').find('span.header').text('Dzielnica');$district.removeClass('hidden').find('.suggestinput').removeClass('binded')}else{$district.find('a.button').removeClass('fbold').find('span.header').text('Dzielnica');$district.addClass('hidden').find('.suggestinput').removeClass('binded')}}},lastLocationsNoBlur:($.inArray(sitecode,['olxpt'])>-1)?true:false});thiz.dom.regionInput.blur(function(){if(thiz.dom.regionInput.val()==thiz.dom.regionInput.attr('defaultalternative'))thiz.dom.regionInput.val(thiz.dom.regionInput.attr('defaultval'))});if(districts){var $district=$('#param_district');if(city_id&&districts[city_id]){$district.removeClass('hidden')}else $district.addClass('hidden')}},initScreenSize:function(){function mediaQuery(){var windowWidth=$(window).width();if(windowWidth<='1510'){$('body').addClass('smallscreen')}else $('body').removeClass('smallscreen')};mediaQuery();$(window).resize(function(){mediaQuery()})},initTabs:function(){var thiz=this,tabs={topTabSeek:'offer_seek',topTabOffer:'private_business',topTabPhotos:'photos'},$hidden=$('#pageHidden');for(var x in tabs){var $tabsContainer=$('#tabs-container');$('a.'+x,$tabsContainer).data('key',tabs[x]).click(function(event){if(!history.pushState)return true;var $this=$(this),key=$this.data('key');if(!$hidden.length)$hidden=$('<input type="hidden" id="pageHidden" name="page" />').appendTo(thiz.dom.form);$hidden.val(0);$hidden=$('input[name="search['+key+']"]',thiz.dom.form);if(!$hidden.length)$hidden=$('<input type="hidden" name="search['+key+']" />').appendTo(thiz.dom.form);var val=$this.data('type');if(val=='all'){$hidden.remove()}else $hidden.val(val);if(key=='offer_seek')thiz.categoryChanged(thiz.dom.categoryHidden.val(),false,true);thiz.submitForm(10);return false})};$('#private-only').click(function(event){$hidden=$('input[name="search[private_business]"]',thiz.dom.form);if(this.checked){if(!$hidden.length)$hidden=$('<input type="hidden" name="search[private_business]" value="private"/>').appendTo(thiz.dom.form)}else $hidden.remove();thiz.submitForm(10);return false}).parent().renderForms()},initViewButtons:function(){var thiz=this;$('a.topTabView',$('#viewSelector')).click(function(){var $this=$(this),$hidden=$('input[name="view"]',thiz.dom.form);if(!$hidden.length)$hidden=$('<input type="hidden" name="view" />').appendTo(thiz.dom.form);$hidden.val($this.data('type'));$this.find('span').click(function(){$.cookie('view',$(this).data("view"),{expires:90,path:'/'})});thiz.submitForm(0,true);return false})},initTopLinks:function(){var thiz=this,$topLinks=$('#topLink');$('#topLinkShowAll').click(function(){$(this).parent().remove();$topLinkItem=$topLinks.find('li');$topLinkItem.filter('.visible').remove();$topLinkItem.filter('.hidden').removeClass('hidden');return false});$('a.topLink',$topLinks).mouseup(function(event){var $this=$(this);if(event.which!=1)return true;if($this.hasClass('parameter')){var key=$this.data('id'),paramKey=$topLinks.data('key'),$liParam=$('#param_'+paramKey);if($liParam.length){thiz.fakeClick=true;$('a.button',$liParam).click();thiz.fakeClick=false;var $input=$('#f-'+key+'_'+paramKey);if($input.length)$input.closest('li').find('label.select-only-this-opiton').click()}}else{var categoryID=$this.data('id');thiz.fakeClick=true;$('#choosecat').click();thiz.fakeClick=false;var $categoryLink=$('#a-category-'+categoryID);if($categoryLink.length){$categoryLink.click()}else{var $subCategories=$('#param_subcat');thiz.fakeClick=true;$('a.button',$subCategories).click();thiz.fakeClick=false;$categoryLink=$('a.category_choose'+categoryID,$subCategories);$categoryLink.click()}};return false})},initPopState:function(){var thiz=this;if(!history.pushState||(thiz.isChrome()&&thiz.getChromeVersion()<=33))return true;if(!history.state){history.replaceState({init:true},'title',window.location.href);history.pushState({url:window.location.href},'title',window.location.href)};window.onpopstate=function(event){if(thiz.isChrome()&&thiz.getChromeVersion()>34&&$.cookie('from_detail')==="1"){$.cookie('from_detail',0,{path:'/',domain:'.'+window.session_domain});return false};if(event.state!=null&&!event.state.init){location.replace(event.state.url)}else if(event.state!=null&&event.state.init)history.back()}},initSubmit:function(){var thiz=this;thiz.dom.form.bind('submit',function(event){if(thiz.submitTimer)window.clearTimeout(thiz.submitTimer);thiz.showPageLoader(90,400);if(!thiz.useAjax()){$('<input type="hidden" name="savedefaultlocationincookie" value="1">').appendTo(thiz.dom.form);return true};if(!history.pushState||($.browser.webkit&&!thiz.isSafari()&&thiz.getChromeVersion()<=33))return true;var data=thiz.dom.form.serializeArray(),search={},currency='';for(var i=0,l=data.length;i<l;i++){var key=data[i].name;if(key.indexOf('[')>0){key=key.substring(key.indexOf('[')+1,key.length-1);search[key]=data[i].value};if(key==='currency')currency=data[i].value};geoData.params.search=search;geoData.params.currency=currency;var defaultSearchString,formSerializedData;if(thiz.dom.qInput.val()===thiz.dom.qInput.attr('defaultval')){defaultSearchString=thiz.dom.qInput.val();thiz.dom.qInput.val('');formSerializedData=thiz.dom.form.serialize();thiz.dom.qInput.val(defaultSearchString)}else formSerializedData=thiz.dom.form.serialize();thiz.post('search','list',formSerializedData,function(data){thiz.searchSubmitPostCallback(data)});return false})},searchSubmitPostCallback:function(data){$(window).trigger('startReloadContent');var thiz=this;thiz.setSearchId();thiz.cityRegionChanged=false;var $div=thiz.dom.adsContainer.html(data);$('#footerTop').html($('#fakeFooter',$div).detach().html());thiz.initDom();var $bodyContainer=thiz.dom.bodyContainer,url=$bodyContainer.data('ajaxurl');if(url.substring(0,url.indexOf(session_domain))!=document.URL.substring(0,document.URL.indexOf(session_domain))){document.location=url;return false};thiz.dom.bodyContainer.hide().fadeIn();$div.show();if(url!=document.URL){var pageTitle=$bodyContainer.data('pagetitle')?$bodyContainer.data('pagetitle'):'';document.title=pageTitle;history.pushState({url:url},pageTitle,url);var $changeLangLink=$('#changeLang');if($changeLangLink.length)$changeLangLink.attr('href',$changeLangLink.data('baselink')+'&l='+url);thiz.historyPushed=true};thiz.stopPageLoader();thiz.showPageLoader(100,200,function(){thiz.hidePageLoader()});thiz.initOrder();thiz.initPrevNext();thiz.initFacets(thiz.dom.form);thiz.initFavoritesGalleryBox();thiz.initPager();thiz.initTabs();thiz.initViewButtons();thiz.initTopLinks();thiz.initCurrencies();thiz.initScreening();thiz.initAdListingTopFixed();thiz.initBannersScreening();thiz.setSearchParams(true);thiz.initSkyscraper();thiz.initFooterCategories();thiz.initFavouritesBar();if(typeof NinjaTracker!=='undefined')thiz.initNinjaAdImpressions();ObserveObject.bindClicks();setTimeout(function(){ObserveObject.listReloaded();ObserveObject.updateList()},100);var category_id=thiz.dom.categoryHidden.val(),$link=$('#a-category-'+category_id);if($link.length){thiz.dom.categoryList.find('li.selected').removeClass('selected');if(category_id)$link.parents('li').addClass('selected')};$('input[type="text"]',thiz.dom.form).each(function(){var $this=$(this);if($this.val()==''&&$this.attr('defaultval')&&!$this.is(':focus'))$this.val($this.attr('defaultval'))});var $param=$('.numeric-item.price,.numeric-item.salary',thiz.dom.params);$param.find('.suggestinput').removeClass('binded').text('');$param.find('input[type="text"]').blur();thiz.initAdsense(true);if(typeof _gaq!='undefined')_gaq.push(['_trackPageview']);if(typeof window.module_gemius!='undefined'&&(typeof gemius_identifier!='undefined'))gemius_hit(gemius_identifier);if(window.module_criteo!==undefined)$(window).trigger('criteoShowListOnAction');thiz.initJobsBadge(category_id);thiz.initRealEstateBadge(category_id);$(window).trigger('ajaxReady');var event=new CustomEvent("ajaxReady");window.dispatchEvent(event)},initSeoLocationsFooter:function(){$('#showAllLocChildren').click(function(){$(this).remove();$('#locationLinks').find('li.hidden').show();return false})},initGoToTop:function(){var thiz=this,$goTop=$('<a id="gotop" class="fix bgfff br-1 tdnone normal color-1 tcenter" style="display:none; bottom:0px"><i data-icon="arrow-up"></i></a>');thiz.dom.body.append($goTop);$goTop.click(function(){$('html, body').animate({scrollTop:0},'slow');return false});var halfContent=parseInt(thiz.dom.bodyContainer.height()/3),$html=$(document)
function getPositionGoTop(){if($(window).width()>1e3){if(!thiz.positionContent){thiz.positionContent=$('.content',thiz.dom.bodyContainer).offset();thiz.widthContent=$('.wrapper',thiz.dom.bodyContainer).outerWidth()};if(thiz.positionContent!==undefined)$goTop.css({left:thiz.positionContent.left+thiz.widthContent-5})}else $goTop.css({left:'auto',right:5});if($html.scrollTop()>halfContent){$goTop.fadeIn()}else $goTop.fadeOut()};if($html.scrollTop()>halfContent)getPositionGoTop();$(window).scrolled(100,function(){getPositionGoTop()});$(window).resize(function(){thiz.positionContent=false;getPositionGoTop()})},initAdsense:function(ajax){if(window.afsForAdblock!==undefined&&$.cookie("used_adblock")==='adblock_enabled')return;var thiz=this,canShowSlot=function(slotId){var canShow=true,container=$(slotId).data('container');if(window.aPerformance&&container)canShow=window.aPerformance.checkAdvertSlot(container)==='show';return canShow};setTimeout(function(){if(window.testManager&&testManager.isPass($.cookie('dfp_segment_test_v3'),'BaxterAfsTest'))return;if(useExternalScripts&&typeof AdsenseClass!='undefined')if(window.module_ucell_trackers_off===undefined){if(!ajax)thiz.adsense=new AdsenseClass();thiz.adsense.setQuery(q);thiz.adsense.setRegionName(regionName);thiz.adsense.setSubregionName(subregionName);thiz.adsense.setCategory(category_id,categoryName,categoryCode,categoryAdsenseText);thiz.adsense.setRootCategory(root_category_id,rootCategoryName,rootCategoryCode,rootCategoryAdsenseText);thiz.adsense.setSeoPageName(setSeoPageName);if(q){if(window.module_afs_refactor!==undefined&&($('#afscontainernew').length||$('#block1').length)){var slotId=$('#afscontainernew').length?'#afscontainernew':'#block1';if(canShowSlot(slotId))thiz.adsense.showAdsenseForQuery($(slotId).data('pageoption'),$(slotId).data('adblockconfig'))}else{thiz.adsense.addAdsenseForSearchBlock('adcontainer3',3);thiz.adsense.showAdsenseForSearchAds(totalAds>0?'asf':'asf_empty')}}else if(window.module_test_afc_afs_slots_listing!==undefined&&($('#adcontainerafswithoutphrase').length||$('#block1').length)){var slotId=$('#adcontainerafswithoutphrase').length?'#adcontainerafswithoutphrase':'#block1';if(canShowSlot(slotId))thiz.adsense.showAdsense($(slotId).data('pageoption'),$(slotId).data('adblockconfig'))}else if((window.module_afc_to_afs_listing!==undefined&&$('#adcontainer3').length&&$('#adcontainer3').data('q'))){thiz.adsense.setQuery($('#adcontainer3').data('q'));thiz.adsense.addAdsenseForSearchBlock('adcontainer3',3);var channel='asf_q';thiz.adsense.showAdsenseForSearchAds(channel)}else if(window.module_adsense_new===undefined&&window.module_afc_to_dfp===undefined){thiz.adsense.addAdsenseForContentBlock('google-ads-container3',3,'listing_bottom');thiz.adsense.showAdsenseForContentAds()}}},150);if(window.sitecode=='olxpt')if($('#div-gpt-ad-1457614504567-0').length)setTimeout(function(){var categoryIds=['362','376','377','378','379','380','416','417','418','601','603','607','613','617','621','629','631','633','637','641','645','649','655','657','659','661','663','665','669','671','673','679','681','683','689','697','699','701','707','717','719','721','727','729','731','741','743','749','751','753','763','769','775','777','781','789','791','795','797','801','803','805','809','815','817','819','821','823','827','829','841','843','845','849','851','855','859','867','875','881','891','895','899','905','907','909','911','915','921','923','929','931','933','935','941','945','947','953','955','957','959','965','967','969','971','973','979','983','985','999','1001','1011','1015','1017','1021','1025','1027','1029','1031','1033','1035','1037','1039','1041','1043','1045','1047','1049','1051','1053','1063','1077','1079','1081','1083','1095','1103','1105','1107','1109','1111','1115','1121','1135','1147','1151','1155','1157','1163','1175','1177','1179','1195','1201','1205','1211','1219','1221','1223','1245','1253','1257','1271','1285','1293','1295','1317','1319','1323','1325','1327','1331','1335','1339','1345','1359','1363','1367','1373','1389','1393','1401','1405','1407','1415','1423','1427','1433','1441','1443','1447','1451','1453','1455','1467','1469','1475','1479','1493','1497','1501','1511','1527','1533','1541','1543','1549','1551','1553','1557','1563','1573','1579','1581','1585','1587','1599','1615','1621','1623','1647','1649','1653','1655','1657','1659','1663','1665','1667','1669','1671','1673','1677','1679','1681','1683','1685','1687','1689','1691','1693','1695','1697','1705','1707','1711','1713','1717','1719','1727','1729','1731','1733','1737','1741','1745','1751','1753','1757','1763','1765','1769','1771','1773','1775','1779','1781','1785','1787','1791','1793','1795','1799','1801','1803','1813','1821','1823','1829','1831','1835','1837','1843','1851','1855','1861','1863','1865','1867','1875','1877','1881','1883','1885','1887','1891','1893','1897','1903','1905','1907','1913','1917','1919','1921','1923','1925','1927','1929','1935','1941','1945','1947','1953','1955','1959','1975','1977','1983','1985','1991','1997','2005','2007','2011','2013','2019','2023','2027','2029','2031','2033','2035','2037','2039','2041','2043','2045','2047','2049','2051','2053','2055','2057','2059','2061','2063','2067','2069','2071','2073','2075','4879'];if(window.category_id!==undefined&&categoryIds.indexOf(window.category_id)!==-1){var $interstitial_banner_video=$('#interstitial_banner_video'),$hide_interstitial_video=$('#hide_interstitial_video');if($interstitial_banner_video.length>0){if($.cookie('interstitial_banner_video')==null)$interstitial_banner_video.show();$hide_interstitial_video.click(function(){$.cookie('interstitial_banner_video','1',{expires:30,path:'/',domain:'.'+session_domain});$interstitial_banner_video.hide();return false})};var event=new CustomEvent("showInterstitial");document.getElementById('div-gpt-ad-1457614504567-0').dispatchEvent(event)}},150)},initFavoritesGalleryBox:function(){ObserveObject.scale($('li > .card',$('#favsearchgallerybox')),0.35);var $galleryBox=$('#favoritesGalleryBox');if(!$galleryBox.length)return;$('ul.tabsfav > li',$galleryBox).click(function(e){var $this=$(this),$tab=$this.children('span');if(!$tab.hasClass('selected')){if($this.hasClass('lastSeen')){ObserveObject.getContentTab('lastSeen',typeof e.originalEvent!='undefined')}else if($this.hasClass('observedAds')){ObserveObject.getContentTab('observedAds',typeof e.originalEvent!='undefined')}else if($this.hasClass('observedSearches'))ObserveObject.getContentTab('observedSearches',typeof e.originalEvent!='undefined');$galleryBox.find('ul.tabsfav > li > span').removeClass('selected');$tab.addClass('selected')}});$('a.observeChange',$('#tab-lastSeen')).click(function(e){e.preventDefault();var $this=$(this),$icon=$this.find('span'),adId=$this.data("adId");if($icon.hasClass('selected')){ObserveObject.removeAdFromObserved(adId,$('.observed-'+adId).parent())}else ObserveObject.addAdToObserved(adId,$('.observed-'+adId).parent())});if(window.location.href.search('#tab-')>0){var tabName=window.location.href.substr(window.location.href.search('#tab-')+5,window.location.href.length),$liTab=$galleryBox.find('li.'+tabName);if($liTab.not('.hidden').length>0){$liTab.click()}else $('.tabsfav > li',$galleryBox).not('.hidden').first().click()}else $('.tabsfav > li',$galleryBox).not('.hidden').first().click()},initChatBox:function(){var thiz=this,$chatButton=$('.listing-online'),$chatHtml=$('#chatBox').hide(),$formElement=$chatHtml.find('#contact-form2'),$sendButton=$formElement.find('input[type="submit"]'),$closeBtn=$chatHtml.find('.header .closeBtn');$.validator.addMethod("phone",function(value,element){if($.trim(value).length==0)return true;if(/^[0-9 \-,\+\(\)]+$/i.test(value)){var candidates=[].concat(value.split(',')||'');for(var i in candidates){var matches=candidates[i].match(/(\d+)/g);if(matches==null)return false;var number=matches.join("");if(number=='123456789')return false;if(number.length<7||number.length>14)return false};return true};return false},'Proszę podać poprawny numer. Np.: 11 222 333 444 lub 123-123-123');var rulesObj={'contact[txt]':{required:true,maxlength:5e3,minlength:20},'contact[email]':{required:true,maxlength:255,email:true},'contact[captcha]':{required:true},'contact[phone]':{required:function(element){return $(element).data('required')},phone:true,maxlength:50}};$chatButton.bind("click",function(){var userName=$(this).data('user-name'),chatStatus=$(this).data('chat-status'),adId=$(this).data('ad-id'),statusHolder=$chatHtml.find('.header .status');$chatHtml.find('#chat-adid').val(adId);$chatHtml.find('#ask-text2').val('');$chatHtml.find('#ask-email2').val('');$chatHtml.find('.header .name').text(userName);statusHolder.text(chatStatus);statusHolder.removeClass('online');$chatHtml.find('#contact-form2').show();$chatHtml.find('div.fblock').removeClass('error').find('p.errorboxContainer').remove();$chatHtml.find('.chat-msg-sent').remove();$chatHtml.find('.chat-downloadApp').remove();if(chatStatus=='Online')statusHolder.addClass('online');$chatHtml.show();$('#contact-form2').each(function(){var $form=$(this);$form.find('input[type=submit]').removeAttr('disabled');if((!thiz.isIE()||thiz.isIE()>7))$form.validate({rules:rulesObj,submitHandler:function(form){$(form).find('input[type=submit]').attr('disabled','disabled');$form.find('#javascript').val(eval($form.find('#javascript').val()));$('#securitybox, #answerbox').hide();$('.offer-contact').addClass('sendinfobox');$('#message-loading').show();thiz.sendChatMessage();return false}}).showErrorsFromAction()});return false});$closeBtn.bind("click",function(){$chatHtml.hide()})},sendChatMessage:function(){$.ajax({type:'POST',url:www_base+'/ajax/ads/contact/',async:false,dataType:'json',data:$('#contact-form2').serialize(),error:function(obj,status,errorTrown){return false},success:function(data){$('#contact-form2').after('<div class="chat-msg-sent">'+$('#contact-form2').find('#ask-text2').val()+'</div><div class="chat-downloadApp"><a href="/mobileapps/">Please Download APP</a></div>');$('#contact-form2').hide().find('#ask-text2').val('');$('#contact-form2').find('#ask-email2').val('');return false}});return false},initLocationInfo:function(){var $locationInfoBox=$('#locationInfoBox'),$showLocationInfo=$('#showLocationInfo');$locationInfoBox.prependTo('#proposalContainer').removeClass('hidden');$showLocationInfo.click(function(e){e.preventDefault();$locationInfoBox.toggleClass('info-active')});$('#cityField, #locationInfoBox').click(function(e){e.stopPropagation();$('#categorySelectList').hide()});$('body').bind('click',function(e){$('#proposalContainer').addClass('hidden');$locationInfoBox.removeClass('info-active')});$('#search-text').focus(function(){$('#proposalContainer').addClass('hidden');$locationInfoBox.removeClass('info-active')});if(window.module_cities_old===undefined){$('#cityField').bind('focus',function(){$(this).parent().find('.tooltip-subregion').removeClass('hidden')});$('#cityField').bind('blur',function(){$(this).parent().find('.tooltip-subregion').addClass('hidden')})}},showMap:function(){var mapLocationDiv='#mapLocationDiv',$mapLocationDiv=$(mapLocationDiv),$formMapParams=$('#mapParams'),innerHeight=$(window).height()-240;if($mapLocationDiv.length)$.fancybox({href:mapLocationDiv,title:'<p class="block clr xx-large lheight22 marginleft10 minheight22">Select region</p>',titleShow:true,scrolling:'no',padding:0,autoScale:false,autoDimensions:true,onStart:function(){$mapLocationDiv.show();$mapLocationDiv.find('.inner').css({maxHeight:innerHeight,overflow:"auto"});$formMapParams.renderForms()},onCleanup:function(){$mapLocationDiv.hide().unwrap()}})},initJobsBadge:function(category_id){if($.cookie("badgeJobcategory")){return}else if(sitecode=='olxpl'){var $jobBadge=$('.js-badge-jobcategory');if(window.root_category_id==="4"){if(category_id==='1443'&&$('.js-badge-fixlyCategoryListing').length>0){$jobBadge.addClass('hidden');$('#mobileAppsbadge').hide();$('.js-badge-fixlyCategoryListing').removeClass('hidden');return};$('.js-badge-fixlyCategoryListing').addClass('hidden');$jobBadge.removeClass('hidden');$('#mobileAppsbadge').hide()}else{$jobBadge.addClass('hidden');$('#mobileAppsbadge').show()}}},initFixlyBadge:function(category_id){if($.cookie('badgeFixlyCatListing')||sitecode!=='olxpl')return;var $fixlyBadge=$('.js-badge-fixlyCategoryListing'),imageClass=null,imageLink='http://fixly.pl',idsJobsServicesConstruction=['1443'],idsRealEstate=['3','1307','1309'],idsHomeGarden=['628','565','292'],idsServices=['619','1542','306'];if($fixlyBadge.length>0){if(idsJobsServicesConstruction.indexOf(category_id)>=0){imageClass='badge-fixlyCategory__services_jobs_construction';imageLink='https://fixly.pl/rejestracja/wykonawca?utm_source=praca-olx-SP&utm_medium=widget&utm_campaign=OLX_SP_3'}else if(idsRealEstate.indexOf(category_id)>=0){imageClass='badge-fixlyCategory__real_estate';imageLink='https://fixly.pl/?utm_source=nieruchomosci-U&utm_medium=widget&utm_campaign=OLX_U_3'}else if(idsHomeGarden.indexOf(category_id)>=0){imageClass='badge-fixlyCategory__home_garden';imageLink='https://fixly.pl/?utm_source=meble-u&utm_medium=widget&utm_campaign=OLX_U_3'}else if(idsServices.indexOf(category_id)>=0){imageClass='badge-fixlyCategory__services';imageLink='https://fixly.pl/uslugi/budowa-i-remont?utm_source=uslugi-u&utm_medium=widget&utm_campaign=OLX_U_3'};if(imageClass){$fixlyBadge.addClass(imageClass);$fixlyBadge.find('a').attr('href',imageLink);$fixlyBadge.removeClass('hidden')}else $fixlyBadge.addClass('hidden')}},initRealEstateBadge:function(category_id){if($.cookie('badgeRealEstateCatListing'+category_id)||sitecode!=='olxpl')return;var thiz=this;this.badgeInitiated=false;var $realEstateBadge=$('.js-badge-real_estate_category'),$realEstateBadgeClose=$('.js-badge-real_estate_category-close'),mapObj={709:"https://otodom.pl/sprzedaz/dzialka/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge",1707:"https://otodom.pl/sprzedaz/mieszkanie/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge",710:"https://otodom.pl/sprzedaz/lokal/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge",1321:"https://otodom.pl/sprzedaz/haleimagazyny/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge",1309:"https://otodom.pl/sprzedaz/dom/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge",124:"https://otodom.pl/sprzedaz/garaz/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge",11:"https://otodom.pl/wynajem/pokoj/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge",25:"https://otodom.pl/wynajem/dzialka/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge",24:"https://otodom.pl/sprzedaz/dzialka/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge",15:"https://otodom.pl/wynajem/mieszkanie/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge",14:"https://otodom.pl/sprzedaz/mieszkanie/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge",127:"https://otodom.pl/wynajem/lokal/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge",125:"https://otodom.pl/sprzedaz/lokal/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge",1331:"https://otodom.pl/wynajem/haleimagazyny/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge",1329:"https://otodom.pl/sprzedaz/haleimagazyny/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge",20:"https://otodom.pl/wynajem/dom/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge",18:"https://otodom.pl/sprzedaz/dom/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge",1313:"https://otodom.pl/wynajem/garaz/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge",1315:"https://otodom.pl/sprzedaz/garaz/?utm_source=refferals&utm_medium=traffic_exchange&utm_campaign=badge"};if($realEstateBadge.length>0){if(!this.badgeInitiated)$realEstateBadgeClose.click(function(e){$.cookie('badgeRealEstateCatListing'+category_id,true,{path:'/',domain:'.'+session_domain});$realEstateBadge.addClass('hidden');e.preventDefault();thiz.badgeInitiated=true});if(mapObj.hasOwnProperty(category_id)){$realEstateBadge.find('a').attr('href',mapObj[category_id]);$realEstateBadge.removeClass('hidden');$('.badge-fixlyCategory__real_estate').addClass('hidden')}else $realEstateBadge.addClass('hidden')}},initNinjaAdImpressions:function(){var $listAds=$('#offers_table .offer table'),$listPromotedAds=$('.offers--top .promoted-list'),$galleryAds=$('#gallerywide > li'),$galleryPromotedAds=$('#gallerywide2 > li'),$ads='',$promotedAds='';if($galleryAds.length>0){$ads=$galleryAds;$promotedAds=$galleryPromotedAds}else{$ads=$listAds;$promotedAds=$listPromotedAds};var scrollTimer=null,eventName='scroll.adimpressions';Main.pushAdImpressionsOnScroll($ads,$promotedAds);$(window).unbind(eventName).bind(eventName,function(){if(scrollTimer)clearTimeout(scrollTimer);scrollTimer=setTimeout(function(){Main.pushAdImpressionsOnScroll($ads,$promotedAds)},100)})}});$(function(){ads=new AdsClass()});(function(e){function t(t,n){function w(){r.update();S();return r}function E(){var e=d.toLowerCase();f.obj.css(p,v/u.ratio);o.obj.css(p,-v);g.start=f.obj.offset()[p];u.obj.css(e,a[n.axis]);a.obj.css(e,a[n.axis]);f.obj.css(e,f[n.axis])}function S(){if(!y){f.obj.bind("mousedown",x);a.obj.bind("mouseup",N);var e;l.obj.mousedown(function(){b.obj.addClass("noSelect");clearInterval(e);e=setInterval(C,50)}).mouseup(function(){b.obj.removeClass("noSelect");clearInterval(e)});c.obj.mousedown(function(){b.obj.addClass("noSelect");clearInterval(e);e=setInterval(k,50)}).mouseup(function(){b.obj.removeClass("noSelect");clearInterval(e)});l.obj.bind("click",function(){clearInterval(e);C();return false});c.obj.bind("click",function(){clearInterval(e);k();return false})}else{var e;f.obj[0].ontouchstart=function(e){if(1===e.touches.length){x(e.touches[0]);e.stopPropagation()}};l.obj.bind("touchstart",function(){b.obj.addClass("noSelect");clearInterval(e);e=setInterval(C,50)}).bind("touchend",function(){b.obj.removeClass("noSelect");clearInterval(e)});c.obj.bind("touchstart",function(){b.obj.addClass("noSelect");clearInterval(e);e=setInterval(k,50)}).bind("touchend",function(){b.obj.removeClass("noSelect");clearInterval(e)})}if(n.scroll&&window.addEventListener){i[0].addEventListener("DOMMouseScroll",T,false);i[0].addEventListener("mousewheel",T,false)}else if(n.scroll){i[0].onmousewheel=T}}function x(t){e("body").addClass("noSelect");var n=parseInt(f.obj.css(p),10);g.start=h?t.pageX:t.pageY;m.start=n=="auto"?0:n;if(!y){e(document).bind("mousemove",N);e(document).bind("mouseup",L);f.obj.bind("mouseup",L)}else{document.ontouchmove=function(e){e.preventDefault();N(e.touches[0])};document.ontouchend=L}}function T(t){if(o.ratio<1){var r=t||window.event,i=r.wheelDelta?r.wheelDelta/120:-r.detail/3;v-=i*n.wheel;v=Math.min(o[n.axis]-s[n.axis],Math.max(0,v));f.obj.css(p,v/u.ratio);o.obj.css(p,-v);if(n.lockscroll||v!==o[n.axis]-s[n.axis]&&v!==0){r=e.event.fix(r);r.preventDefault()}}}function N(e){if(o.ratio<1){if(n.invertscroll&&y){m.now=Math.min(a[n.axis]-f[n.axis],Math.max(0,m.start+(g.start-(h?e.pageX:e.pageY))))}else{m.now=Math.min(a[n.axis]-f[n.axis],Math.max(0,m.start+((h?e.pageX:e.pageY)-g.start)))}v=m.now*u.ratio;o.obj.css(p,-v);f.obj.css(p,m.now)}}function C(){o.ratio=s[n.axis]/o[n.axis];u.obj.toggleClass("disable",o.ratio>=1);if(v>10){v-=10}else{v=0}E()}function k(){o.ratio=s[n.axis]/o[n.axis];u.obj.toggleClass("disable",o.ratio>=1);iScrollBottom=o.ratio<=1?o[n.axis]-s[n.axis]:isNaN(parseInt(sScroll,10))?v:parseInt(sScroll,10);if(iScrollBottom-v>10){v+=10}else{v=iScrollBottom}E()}function L(){e("body").removeClass("noSelect");e(document).unbind("mousemove",N);e(document).unbind("mouseup",L);f.obj.unbind("mouseup",L);document.ontouchmove=document.ontouchend=null}var r=this,i=t,s={obj:e(".viewport",t)},o={obj:e(".overview",t)},u={obj:e(".scrollbar",t)},a={obj:e(".track",u.obj)},f={obj:e(".thumb",u.obj)},l={obj:e(".scrollbarup",u.obj)},c={obj:e(".scrollbardown",u.obj)},h=n.axis==="x",p=h?"left":"top",d=h?"Width":"Height",v=0,m={start:0,now:0},g={},y="ontouchstart"in document.documentElement,b={obj:e("body")};this.update=function(e){if(n.arrowsInside){u.obj.css("marginTop",18)}s[n.axis]=s.obj[0]["offset"+d]-(n.arrowsInside?36:0);o[n.axis]=o.obj[0]["scroll"+d]-(n.arrowsInside?36:0);o.ratio=s[n.axis]/o[n.axis];u.obj.toggleClass("disable",o.ratio>=1);a[n.axis]=n.size==="auto"?s[n.axis]:n.size;f[n.axis]=Math.min(a[n.axis],Math.max(0,n.sizethumb==="auto"?a[n.axis]*o.ratio:n.sizethumb));u.ratio=n.sizethumb==="auto"?o[n.axis]/a[n.axis]:(o[n.axis]-s[n.axis])/(a[n.axis]-f[n.axis]);v=e==="relative"&&o.ratio<=1?Math.min(o[n.axis]-s[n.axis],Math.max(0,v)):0;v=e==="bottom"&&o.ratio<=1?o[n.axis]-s[n.axis]:isNaN(parseInt(e,10))?v:parseInt(e,10);E()};return w()}e.tiny=e.tiny||{};e.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:true,lockscroll:true,size:"auto",sizethumb:"auto",invertscroll:false,arrowsInside:false}};e.fn.tinyscrollbar=function(n){var r=e.extend({},e.tiny.scrollbar.options,n);this.each(function(){e(this).data("tsb",new t(e(this),r))});return this};e.fn.tinyscrollbar_update=function(t){return e(this).data("tsb").update(t)}})(jQuery);$(function(){new ModerationClass()});ModerationClass=BaseClass.extend({init:function(){var thiz=this;this._super();this.initModeration();this.ajaxContainer=$('#listContainer');thiz.ajaxContainer.ajaxComplete(function(){thiz.initModeration()})},initModeration:function(){var thiz=this,editbarDiv=$('.editbar');if(editbarDiv.data('inited'))return;editbarDiv.data('inited',true);var canEdit=$('#frontendEditBox').length;if($('.editbar #selectAllBtn').length>0)$('.rightBranding').hide();var $sliders=$('.editbar .slider');$sliders.click(function(){$('.editbar .box').slideUp();$sliders.find(".icon").removeClass('aeup').addClass('aedown');var buttonID=$(this).attr("id"),actionName=buttonID.substring(7,200).toLowerCase();if($('.editbar .box.'+actionName).is(":hidden")){$(this).find(".icon").removeClass('aedown').addClass('aeup');$('.editbar .box.'+actionName).slideDown()};return false});$('.editbar:first .cancel-edit').click(function(e){e.preventDefault();$sliders.find(".icon").removeClass('aeup').addClass('aedown');$('.editbar .box').slideUp()});if(typeof $.fn.renderForms=='function'){$('.checkbox-container').renderForms({dropdowns:false});$('#selectAllBtn').parent().renderForms({dropdowns:false})};$('.banselect').click(function(){$this=$(this);$('.banselect').removeClass('banselected');$this.addClass('banselected');return false});$('#removeAdButton').click(function(){$selected=$('.banselected');if($selected.size()==0){alert('Select ban reason');return false};var reasonId=$selected.data("banId"),offerId=$selected.data("offerId"),isPaid=false;if($(this).hasClass('is_paid'))isPaid=true;$('#ajax-remove-message').text('wait...').show();$.post('//'+window.location.host+'/adminpanel/ajax/frontendmoderation/remove/',{ids:offerId,reason:reasonId,paid_ads_remove:isPaid?1:0},function(data){$('#ajax-remove-message').text('Removed').show();setTimeout(function(){$('#ajax-remove-message').fadeOut(1e3);$('#ajax-remove-message').hide()},3e3)});return false});$('#removeAdsButton').click(function(){$selected=$('.banselected');if($selected.size()==0){alert('Select ban reason');return false};var reasonId=$selected.data("banId"),offerIds=[];$('.checkbox-container :checked').each(function(){offerIds.push($(this).val())});offerIds=offerIds.join(',');$('#ajax-remove-message').text('wait...').show();$.post('//'+window.location.host+'/adminpanel/ajax/frontendmoderation/remove/',{ids:offerIds,reason:reasonId},function(data){$('#ajax-remove-message').text('Removed').show();setTimeout(function(){$('#ajax-remove-message').fadeOut(1e3);$('#ajax-remove-message').hide()},3e3)});return false});var changeFn=function(){$('#saveEdit').attr('disabled',false).parent().removeClass('disabled')};$('#privateBusiness, .category-select, #offerSeek').change(changeFn);$('#title, #description').bind('keypress change keyup',changeFn);$('#saveEdit').click(function(){var offerId=$(this).data("offerId"),title=$('#title').val(),txt=$('#description').val(),idCat=$('#category_field').val(),privateBusiness=$('#privateBusiness').val(),offerSeek=$('#offerSeek').val();$('#ajax-message').text('wait...').show();var postData={id:offerId,title:title,text:txt,id_category:idCat,private_business:privateBusiness,offer_seek:offerSeek},paramName=$('#fakecategory_name_field').val();if(paramName){postData.fakeCategoryParamName=paramName;postData.fakeCategoryParamValue=$('#fakecategory_value_field').val()};$.post('//'+window.location.host+'/adminpanel/ajax/frontendmoderation/edit/',postData,function(data){if(typeof data.status=='string'){$('#ajax-message').text('Saved').show();setTimeout(function(){$('#ajax-message').fadeOut(1e3);$('#ajax-message').hide()},3e3)}});return false});$('#multiEdit').click(function(){var offerIds=[];$('.checkbox-container :checked').each(function(){offerIds.push($(this).val())});var idCat=$('#category_field').val(),privateBusiness=$('#privateBusiness').val(),offerSeek=$('#offerSeek').val();$('#ajax-message').text('wait...').show();var postData={ids:offerIds,id_category:idCat,private_business:privateBusiness,offer_seek:offerSeek},paramName=$('#fakecategory_name_field').val();if(paramName){postData.fakeCategoryParamName=paramName;postData.fakeCategoryParamValue=$('#fakecategory_value_field').val()};$.post('//'+window.location.host+'/adminpanel/ajax/frontendmoderation/multiedit/',postData,function(data){if(typeof data.status=='string'){$('#ajax-message').text('Saved').show();setTimeout(function(){$('#ajax-message').fadeOut(1e3);$('#ajax-message').hide()},3e3)}});return false});$('.category-select').change(function(){$this=$(this);var idCat=$this.find('option:selected').val();thiz.showCategory(idCat);$('option[parent='+idCat+']').parent().show();newSelected=$('option[parent='+idCat+']').parent().find(':first').val();if($('#edit-cat-'+newSelected).attr('is_last')=='1')$('#category_field').val(newSelected)});var $allParamSelect=$('.param-select').change(function(){$this=$(this);var paramName=$this.data('name'),paramValue=$this.val();$('#fakecategory_name_field').val(paramName);$('#fakecategory_value_field').val(paramValue)});if(canEdit&&window.hotkeys)$(document).keydown(function(e){if(e.altKey){var keyCode=String.fromCharCode((96<=e.keyCode&&e.keyCode<=105)?e.keyCode-48:e.keyCode).toLowerCase();for(var i=0;i<hotkeys.length;i++)if(keyCode===hotkeys[i].key){thiz.showCategory(hotkeys[i].category_id);var adID=$('#saveEdit').data("offerId");$.get('//'+window.location.host+'/adminpanel/ajax/frontendmoderation/changecategory/',{adID:adID,categoryID:hotkeys[i].category_id},function(){alert('Category was changed.')});break};return false}});if(canEdit){if(typeof __moderation_category_id!='undefined')thiz.showCategory(__moderation_category_id);if(typeof __moderation_fakecategory_value!="undefined")$('#fake_category_'+__moderation_category_id).val(__moderation_fakecategory_value).change();var firstCategory=$('.category-select [is_last=1]').val();$('#checkbox-change-category').bind('click',function(){var $this=$(this);if($this.filter(':checked').length){thiz.showCategory(firstCategory)}else{$('.category-select').hide();$('#category_field').val('')}})};$allParamSelect.change(changeFn);$('.removeImage').click(function(){var $this=$(this),adID=$('#saveEdit').data("offerId");$this.closest('li').remove();$('.removeImage').hide();$.post('//'+window.location.host+'/adminpanel/ajax/frontendmoderation/removeimage/',{adID:adID,number:$this.attr('rel')},function(){$('.removeImage').show()});return false});$('#cancelDelete').click(function(){$('#editbarDeletearchived').click()});$('#saveDelete').click(function(){var offerId=$(this).data("offerId");$('#ajax-delete-message').text('wait...').show();$.post('//'+window.location.host+'/adminpanel/ajax/moderation/deletearchived/',{id:offerId},function(data){if(typeof data.status=='string'){$('#ajax-delete-message').text('Deleted').show();setTimeout(function(){$('#ajax-delete-message').fadeOut(1e3);$('#ajax-delete-message').hide()},3e3)}});return false});$('#addComment').click(function(){var $txt=$('#rmoderation_comment');text=$txt.val(),userID=$txt.data("userId");$.post('//'+window.location.host+'/adminpanel/ajax/moderation/usercomment/',{userID:userID,text:text},function(data){$txt.val('');var $tpl=$('#userCommentTemplate').clone().removeAttr('id');data.content=text;for(var v in data)$tpl.find('#'+v).text(data[v]).removeAttr('id');$tpl.hide().appendTo($('.commentslist')).fadeIn('slow');$('.commentslist').scrollTop(999999)},'json');return false});$('#selectAllBtn').click(function(){var $checkbox=$(this).parent().find(':checkbox');if($checkbox.is(':checked')){$('.checkbox-container input').attr('checked',true).change()}else $('.checkbox-container input').attr('checked',false).change()});var $adsCheckboxes=$('.checkbox-container input');$adsCheckboxes.click(function(){var $btn=$('#selectAllBtn');if($btn.is(':checked')&&$adsCheckboxes.length>$adsCheckboxes.filter(':checked').length)$('#selectAllBtn').attr('checked',false).change();if($btn.is(':not(:checked)')&&$adsCheckboxes.length==$adsCheckboxes.filter(':checked').length)$('#selectAllBtn').attr('checked',true).change()})},showCategory:function(categoryId){var thiz=this;$('.category-select').hide();$('.category-select').find('option').removeAttr('selected');var __categoryId=categoryId;do{obj=$('#edit-cat-'+categoryId);obj.parent().show();obj.attr('selected','selected');categoryId=obj.attr('parent')}while(categoryId);$('#category_field').val('');if($('#edit-cat-'+__categoryId).attr('is_last')=='1'){$('#category_field').val(__categoryId);thiz.showFakeCategory(__categoryId)}else thiz.showCategory($('.category-select option[parent='+__categoryId+']').attr('value'))},showFakeCategory:function(categoryId){$('.param-select').hide();$('#fakecategory_name_field').val('');$('#fakecategory_value_field').val('');var $el=$('#fake_category_'+categoryId).show();if($el.length){$el.val($el.children(':first').attr('value'));$el.change()}}});AdsenseClassBase=Class.extend({adsBlocks:[],defaultChannel:'',init:function(options){var thiz=this;thiz.w=document.write;thiz.options=$.extend({},options)},setQuery:function(query){this.query=query},setRegionName:function(regionName){this.regionName=regionName},setSubregionName:function(subRegionName){this.subRegionName=subRegionName},setCategory:function(id,name,code,adsenseText){this.category={id:id,name:name,code:code,adsenseText:adsenseText}},setRootCategory:function(id,name,code){this.rootCategory={id:id,name:name,code:code}},setSeoPageName:function(seoPageName){this.seoPageName=seoPageName},setDefaultChannel:function(channel){this.defaultChannel=channel},getChannel:function(channelCode){var thiz=this,channelsCodes=thiz.getChannelsCodes();if(window.isUserSearch)return channelsCodes.user_search;var mapping=thiz.getCategoryChannelsMapping(),channels=thiz.rootCategory&&thiz.rootCategory.id?mapping[thiz.rootCategory.id]:false;if(!channels)return channelsCodes[channelCode];if(thiz.query){return channelsCodes[channelCode]+(channels.asf?','+channels.asf:'')}else if(thiz.forAd){return channelsCodes[channelCode]+(channels.category?','+channels.category:'')+(channels.ad&&channels.ad!=channels.category?','+channels.ad:'')}else return channelsCodes[channelCode]+(channels.category?','+channels.category:'')+(channels.listing&&channels.listing!=channels.category?','+channels.listing:'')},addAdsenseForSearchBlock:function(container,numberOfAds,options){if(!$('#'+container).length)return;var thiz=this;options=$.extend({container:container,number:numberOfAds,lines:numberOfAds,fontFamily:'arial',fontSizeTitle:'16px',fontSizeDescription:'13px',fontSizeDomainLink:'13px',colorTitleLink:'#168ECA',colorText:'#B4B4B4',colorDomainLink:'#909090',attributionText:' ',longerHeadlines:true},options);thiz.adsBlocks.push(options)},getQueryVariable:function(variable){var query=window.location.search.substring(1),vars=query.split("&");for(var i=0;i<vars.length;i++){var pair=vars[i].split("=");if(pair[0]==variable)return pair[1]};return false},showAdsenseForSearchAds:function(channelCode){var thiz=this,pageOptions={pubId:thiz.getPubId(),query:channelCode=='afs_q'?thiz.query:thiz.query+(thiz.regionName?(' '+thiz.regionName):''),channel:thiz.getChannel(channelCode),hl:thiz.getLanguageId(),linkTarget:'_blank',titleBold:false,LinkUnderline:false,rolloverLinkUnderline:true,rolloverLinkBackgroundColor:'#3074B9',rolloverLinkColor:'#FFFFFF',siteLinks:false,verticalSpacing:12};if(window.module_afs_query!=undefined&&thiz.category!=undefined&&thiz.category.code!=undefined)pageOptions.query=thiz.category.code.replace('-',' ')+' '+thiz.query;switch(thiz.adsBlocks.length){case 1:_googCsa('ads',pageOptions,thiz.adsBlocks[0]);break;case 2:_googCsa('ads',pageOptions,thiz.adsBlocks[0],thiz.adsBlocks[1]);break;case 3:_googCsa('ads',pageOptions,thiz.adsBlocks[0],thiz.adsBlocks[1],thiz.adsBlocks[2]);break};thiz.adsBlocks=[]},addAdsenseForContentBlock:function(container,numberOfAds,channelCode,options){if(!$('#'+container).length)return;var thiz=this;options=$.extend({container:container,google_max_num_ads:numberOfAds,google_adnum:0,google_skip:0,google_ad_client:thiz.getPubId(),google_ad_channel:thiz.getChannel(channelCode),google_ad_output:'js',google_ad_type:'text',google_feedback:'on',google_language:thiz.getLanguageId()},options);if(thiz.category&&thiz.category.adsenseText){options.google_kw_type='broad';options.google_kw=thiz.category.adsenseText}else options.google_hints=(thiz.category&&thiz.category.id&&thiz.seoPageName?thiz.seoPageName:thiz.getDefaultHint())+(thiz.subRegionName?(' '+thiz.subRegionName):'');thiz.adsBlocks.push(options)},showAdsenseForContentAds:function(){var thiz=this;if(typeof GoogleObj=='undefined'||!thiz.adsBlocks.length)return;thiz.googleAdsDetails=[];for(x in thiz.adsBlocks){var container=thiz.adsBlocks[x]['container'],data=thiz.adsBlocks[x];delete data.container;thiz.googleAdsDetails.push({data:data,callbackFunction:thiz.getGoogleAdsCallbackFunc(container)})};thiz.adsIndexToLoad=0;thiz.loadGoogleAds(thiz.googleAdsDetails[0])},loadGoogleAds:function(data){var variables=data.data;for(name in window)if(name.indexOf('google_')>=0)delete window[name];variables.google_adnum=0;variables.google_skip=0;window.google_ad_request_done=data.callbackFunction;for(v in variables)window[v]=variables[v];var eleScript=document.createElement('script');document.write=(function(params){$(document.body).append(params)});eleScript.setAttribute('type','text/javascript');eleScript.setAttribute('src','http://pagead2.googlesyndication.com/pagead/show_ads.js?'+(new Date().getTime()));$(document.body).append(eleScript)},loadGoogleNextAd:function(){var thiz=this;thiz.adsIndexToLoad++;if(typeof thiz.googleAdsDetails[thiz.adsIndexToLoad]!='undefined'){thiz.loadGoogleAds(thiz.googleAdsDetails[thiz.adsIndexToLoad])}else{document.write=thiz.w;thiz.adsBlocks=[]}},getGoogleAdsCallbackFunc:function(container){var $container=$('#'+container);if(!$container.length)return;var thiz=this;return function(google_ads){if(google_ads.length==0)return;var s='',i;if(google_ads[0].type=='flash'){s+='<a href=\"'+google_info.feedback_url+'\" style="color:000000">Linki sponsorowane</a><br><object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" WIDTH="'+google_ad.image_width+'" HEIGHT="'+google_ad.image_height+'"> <PARAM NAME="movie" VALUE="'+google_ad.image_url+'"><PARAM NAME="quality" VALUE="high"><PARAM NAME="AllowScriptAccess" VALUE="never"><EMBED src="'+google_ad.image_url+'" WIDTH="'+google_ad.image_width+'" HEIGHT="'+google_ad.image_height+'" TYPE="application/x-shockwave-flash" AllowScriptAccess="never"  PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"></EMBED></OBJECT>'}else if(google_ads[0].type=='image'){s+='<a href=\"'+google_info.feedback_url+'\" style="color:000000"></a><br> <a href="'+google_ads[0].url+'" target="_top" title="Idź do '+google_ads[0].visible_url+'" onmouseout="window.status=\'\'" onmouseover="window.status=\'Przejdź do '+google_ads[0].visible_url+'\';return true"><img border="0" src="'+google_ads[0].image_url+'"width="'+google_ads[0].image_width+'"height="'+google_ads[0].image_height+'"></a>'}else if(google_ads[0].type=="html"){s+=google_ads[0].snippet}else if(google_ads.length>=1){s+='<div class="google-ads-listing-hd"><span>Reklama google</span></div>';for(i=0;i<google_ads.length;++i)s+='<div class="offer"><table cellspacing="0" cellpadding="0" width="100%" summary="Ogłoszenie" class="fixed breakword"><tbody><tr><td width="'+(window.action=='ads'?'168':'112')+'"><a href="'+google_info.feedback_url+'" target="_blank" class="thumb vtop inlblk rel tdnone scale4 nophoto"><span class="alt-text">Brak zdjęcia</span></a></td><td valign="top"><div class="space rel"><h4 class="'+(window.action=='ads'?'x-large lheight20 margintop5':'large lheight20')+'"><a target="_blank" class="link adsense" href="'+google_ads[i].url+'" onmouseout="window.status=\'\'" onmouseover="window.status=\''+google_ads[i].visible_url+'\';return true"> <span class="'+(window.action=='ads'?'fbold':'')+'"> '+google_ads[i].line1+'</span></a> </h4><p class="color-9 lheight16 margintop5 x-normal"><span>'+google_ads[i].line2+' '+google_ads[i].line3+'</span></p> <p class="small"><a target="_blank" class="c41 tunder" href="'+google_ads[i].url+'" onmouseout="window.status=\'\'" onmouseover="window.status=\''+google_ads[i].visible_url+'\';return true"><span>'+google_ads[i].visible_url+'</span></a></p></div></td><td width="1" class="wwnormal tright"></td><td width="1" class="tright small"></td></tr></tbody></table></div>';if(google_ads[0].bidtype=="CPC")google_adnum=google_adnum+google_ads.length};$container.html(s);thiz.loadGoogleNextAd();return}},isMobile:function(){return window.namespace!==undefined&&window.namespace==='i2'},showAdsense:function(pageOptions,adBlockOptions){_googCsa('ads',pageOptions,adBlockOptions)},showAdsenseForQuery:function(pageOptions,adBlockOptions){var channels='';if(window.totalAds>0){channels=this.getChannelCheckABP(pageOptions.channel,'adWasFoundAdblock','adWasFound')}else channels=this.getChannelCheckABP(pageOptions.channel,'adWasNotFoundAdblock','adWasNotFound');pageOptions.channel=channels;_googCsa('ads',pageOptions,adBlockOptions)},getChannelCheckABP:function(channels,keyWithAbp,keyWithoutAbp){if(window.abp!==undefined&&window.abp===1)return channels[keyWithAbp];return channels[keyWithoutAbp]}});AdsenseClass=AdsenseClassBase.extend({getPubId:function(){return this.isMobile()?'mobile-olx-pl':'olx-pl'},getLanguageId:function(){return'pl'},getCategoryChannelsMapping:function(){return{3:{category:1601269028,asf:4775061423,asf_kw:6241336620,asf_kw_empty:7718069824,ad:5473065426,listing:8147330220,asf_kw_new:'olxpl_cat_real_estate_kw',asf_kw_new_empty:'olxpl_cat_real_estate_kw_zero',asf_kw_new_adb:'olxpl_real_estate_kw_adb',asf_kw_new_empty_adb:'olxpl_real_estate_kw_adb_zero'},4:{category:4554735427,asf:7728527824,asf_kw:6380937425,asf_kw_empty:7857670625,ad:8426531828,listing:2100796621,asf_kw_new:'olxpl_cat_jobs_kw',asf_kw_new_empty:'olxpl_cat_jobs_kw_zero',asf_kw_new_adb:'olxpl_jobs_kw_adb',asf_kw_new_empty_adb:'olxpl_jobs_kw_adb_zero'},5:{category:9124535823,asf:3298328228,asf_kw:9334403827,asf_kw_empty:1811137021,ad:3996332223,listing:6670597023,asf_kw_new:'olxpl_cat_motors_kw',asf_kw_new_empty:'olxpl_cat_motors_kw_zero',asf_kw_new_adb:'olxpl_motors_kw_adb',asf_kw_new_empty_adb:'olxpl_motors_kw_adb_zero'},87:{category:1740869828,asf:4914662222,asf_kw:5043805021,asf_kw_empty:6520538226,ad:5612666222,listing:5333464623,asf_kw_new:'olxpl_cat_fashion_kw',asf_kw_new_empty:'olxpl_cat_fashion_kw_zero',asf_kw_new_adb:'olxpl_fashion_kw_adb',asf_kw_new_empty_adb:'olxpl_fashion_kw_adb_zero'},88:{category:6310670224,asf:9484462628,asf_kw:5183405822,asf_kw_empty:6660139028,ad:2798800627,listing:2379998223,asf_kw_new:'olxpl_cat_children_KW',asf_kw_new_empty:'olxpl_cat_children_KW_zero',asf_kw_new_adb:'olxpl_children_kw_adb',asf_kw_new_empty_adb:'olxpl_children_kw_adb_zero'},99:{category:4694336224,asf:7868128624,asf_kw:8136872220,asf_kw_empty:9613605429,ad:8566132626,listing:9763664227,asf_kw_new:'olxpl_cat_electronics_kw',asf_kw_new_empty:'olxpl_cat_electronics_kw_zero',asf_kw_new_adb:'olxpl_electronics_kw_adb',asf_kw_new_empty_adb:'olxpl_electronics_kw_adb_zero'},103:{category:9264136627,asf:3437929023,asf_kw:2229939420,asf_kw_empty:1551749829,ad:4135933020,listing:3856731422,asf_kw_new:'olxpl_cat_animals_kw',asf_kw_new_empty:'olxpl_cat_animals_kw_zero',asf_kw_new_adb:'olxpl_animals_kw_adb',asf_kw_new_empty_adb:'olxpl_animals_kw_adb_zero'},619:{category:6031468622,asf:9205261025,asf_kw:9194803022,asf_kw_empty:1671536220,ad:9903265022,listing:3577529821,asf_kw_new:'olxpl_cat_services_firms_kw',asf_kw_new_empty:'olxpl_cat_services_kw_zero',asf_kw_new_adb:'olxpl_services_firms_kw_adb',asf_kw_new_empty_adb:'olxpl_services_kw_adb_zero'},628:{category:3217603024,asf:6391395427,asf_kw:3427471020,asf_kw_empty:4904204226,ad:7089399424,listing:8286931023,asf_kw_new:'olxpl_cat_home_garden_kw',asf_kw_new_empty:'olxpl_cat_home_garden_kw_zero',asf_kw_new_adb:'olxpl_home_garden_kw_adb',asf_kw_new_empty_adb:'olxpl_home_garden_kw_adb_zero'},751:{category:7647802620,asf:1821595025,asf_kw:3287870225,asf_kw_empty:4764603422,ad:2519599027,listing:5193863828,asf_kw_new:'olxpl_cat_music_education_kw',asf_kw_new_empty:'olxpl_cat_music_edu_kw_zero',asf_kw_new_adb:'olxpl_music_education_kw_adb',asf_kw_new_empty_adb:'olxpl_music_edu_kw_adb_zero'},757:{category:3078002221,asf:6251794628,asf_kw:5323006628,asf_kw_empty:8276473029,ad:6949798620,listing:9624063426,asf_kw_new:'olxpl_cat_agriculture_kw',asf_kw_new_empty:'olxpl_cat_agro_kw_zero',asf_kw_new_adb:'olxpl_agriculture_kw_adb_adb',asf_kw_new_empty_adb:'olxpl_agro_kw_adb_zero'},767:{category:6171069427,asf:9344861821,asf_kw:3148269426,asf_kw_empty:4625002621,ad:1042865824,listing:3717130626,asf_kw_new:'olxpl_cat_sport_hobby_kw',asf_kw_new_empty:'olxpl_cat_sport_hobby_kw_zero',asf_kw_new_adb:'olxpl_sport_hobby_kw_adb',asf_kw_new_empty_adb:'olxpl_sport_hobby_kw_adb_zero'},1151:{asf_kw:7997271420,asf_kw_empty:1950737821,asf_kw_new:'olxpl_cat_for_free_kw',asf_kw_new_empty:'olxpl_cat_for_free_kw_zero',asf_kw_new_adb:'olxpl_for_free_kw_adb',asf_kw_new_empty_adb:'olxpl_for_free_kw_adb_zero'},1153:{asf_kw:2090338628,asf_kw_empty:3567071824,asf_kw_new:'olxpl_cat_exchange_kw',asf_kw_new_empty:'olxpl_cat_exchange_kw_zero',asf_kw_new_adb:'olxpl_exchange_kw_adb',asf_kw_new_empty_adb:'olxpl_exchange_kw_adb_zero'},49:{asf_kw_new:'olxpl_wedding_kw',asf_kw_new_empty:'olxpl_wedding_kw_zero',asf_kw_new_adb:'olxpl_wedding_kw_adb',asf_kw_new_empty_adb:'olxpl_wedding_kw_adb_zero'}}},getChannelsCodes:function(){return{asf:'9670273954,olxpl',asf_empty:'9223624082,olxpl',listing:'4132892137,olxpl',listing_bottom:'3363318730,olxpl',ad_bottom:'1649135591,olxpl',user_search:'5096873820,olxpl',afs_no_result_i2:'8170127828'}},getChannel:function(channelCode){var thiz=this,mapping=thiz.getCategoryChannelsMapping();if(window.module_afs_new_channel!==undefined){if(thiz.rootCategory==undefined||thiz.rootCategory.id=='')if(window.totalAds>0){return window.abp?'olxpl_kw_adb':'olxpl_cat_cat_kw'}else return window.abp?'olxpl_all_kw_adb_zero':'olxpl_cat_all_kw_zero';if(thiz.rootCategory&&thiz.rootCategory.id)if(window.totalAds>0){if(window.abp)return mapping[thiz.rootCategory.id]['asf_kw_new_adb']+',olxpl_kw_adb';return mapping[thiz.rootCategory.id]['asf_kw_new']+',olxpl_cat_cat_kw'}else{if(window.abp)return mapping[thiz.rootCategory.id]['asf_kw_new_empty_adb']+',olxpl_all_kw_adb_zero';return mapping[thiz.rootCategory.id]['asf_kw_new_empty']+',olxpl_cat_all_kw_zero'}};var channelsCodes=thiz.getChannelsCodes();if(window.isUserSearch)return channelsCodes.user_search;var channels=thiz.rootCategory&&thiz.rootCategory.id?mapping[thiz.rootCategory.id]:false;if(!channels)if(window.totalAds>0){return channelsCodes[channelCode]+',2601177422'}else return window.namespace!==undefined&&window.namespace=='i2'?channelsCodes[channelCode]:channelsCodes[channelCode]+',5707591021';if(thiz.query){if(thiz.defaultChannel)return thiz.defaultChannel;var channel='';if(window.totalAds>0){channel+=(channels.asf_kw?','+channels.asf_kw:'');channel+=',3846273426'}else{channel+=(channels.asf_kw_empty?','+channels.asf_kw_empty:'');channel+=',9753206220'};return(channelsCodes[channelCode]?channelsCodes[channelCode]:'')+channel+(channels.asf?','+channels.asf:'')+(thiz.defaultChannel?','+thiz.defaultChannel:'')}else if(thiz.forAd){return channelsCodes[channelCode]+(channels.category?','+channels.category:'')+(channels.ad&&channels.ad!=channels.category?','+channels.ad:'')}else return channelsCodes[channelCode]+(channels.category?','+channels.category:'')+(channels.listing&&channels.listing!=channels.category?','+channels.listing:'')},addAdsenseForSearchBlock:function(container,numberOfAds,options){if(!$('#'+container).length)return;var thiz=this;options=$.extend({container:container,number:numberOfAds,lines:numberOfAds,fontFamily:'arial',fontSizeTitle:'16px',fontSizeDescription:'13px',fontSizeDomainLink:'13px',colorTitleLink:'#168ECA',colorText:'#B4B4B4',colorDomainLink:'#909090',attributionText:' ',longerHeadlines:true,width:"700",location:true},options);thiz.adsBlocks.push(options)},showAdsenseForSearchAds:function(channelCode){var thiz=this,pageOptions={pubId:thiz.getPubId(),query:channelCode=='afs_q'?thiz.query:thiz.query+(thiz.regionName?(' '+thiz.regionName):''),channel:thiz.getChannel(channelCode),hl:thiz.getLanguageId(),noTitleUnderline:true,linkTarget:'_blank',titleBold:false,LinkUnderline:false,rolloverLinkUnderline:true,rolloverLinkBackgroundColor:'#3074B9',rolloverLinkColor:'#FFFFFF',siteLinks:false,verticalSpacing:12};if(window.module_afs_query!=undefined&&thiz.category!=undefined&&thiz.category.code!=undefined)pageOptions.query=thiz.category.code.replace('-',' ')+' '+thiz.query;if(window.action=='ads'&&window.method=='index'){var page=thiz.getQueryVariable('page');pageOptions.adPage=page==false?1:page};switch(thiz.adsBlocks.length){case 1:_googCsa('ads',pageOptions,thiz.adsBlocks[0]);break;case 2:_googCsa('ads',pageOptions,thiz.adsBlocks[0],thiz.adsBlocks[1]);break;case 3:_googCsa('ads',pageOptions,thiz.adsBlocks[0],thiz.adsBlocks[1],thiz.adsBlocks[2]);break};thiz.adsBlocks=[]},getDefaultQueryContext:function(){return'Ogłoszenia | Sprzedam | Kupię |'},getDefaultHint:function(){return'Samochody Mieszkania'},getGoogleAdsCallbackFunc:function(container){var $container=$('#'+container);if(!$container.length)return;var thiz=this;return function(google_ads){if(google_ads.length==0)return;var s='',i;if(google_ads[0].type=='flash'){s+='<a href=\"'+google_info.feedback_url+'\" style="color:000000">Linki sponsorowane</a><br><object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" WIDTH="'+google_ad.image_width+'" HEIGHT="'+google_ad.image_height+'"> <PARAM NAME="movie" VALUE="'+google_ad.image_url+'"><PARAM NAME="quality" VALUE="high"><PARAM NAME="AllowScriptAccess" VALUE="never"><EMBED src="'+google_ad.image_url+'" WIDTH="'+google_ad.image_width+'" HEIGHT="'+google_ad.image_height+'" TYPE="application/x-shockwave-flash" AllowScriptAccess="never"  PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"></EMBED></OBJECT>'}else if(google_ads[0].type=='image'){s+='<a href=\"'+google_info.feedback_url+'\" style="color:000000"></a><br> <a href="'+google_ads[0].url+'" target="_top" title="Idź do '+google_ads[0].visible_url+'" onmouseout="window.status=\'\'" onmouseover="window.status=\'Przejdź do '+google_ads[0].visible_url+'\';return true"><img border="0" src="'+google_ads[0].image_url+'"width="'+google_ads[0].image_width+'"height="'+google_ads[0].image_height+'"></a>'}else if(google_ads[0].type=="html"){s+=google_ads[0].snippet}else if(google_ads.length>=1){s+='<div class="google-ads-listing-hd"><span>Reklama google</span></div>';for(i=0;i<google_ads.length;++i)s+='<div class="offer"><table cellspacing="0" cellpadding="0" width="100%" summary="Ogłoszenie" class="fixed breakword"><tbody><tr><td width="'+(window.action=='ads'?'168':'112')+'"><a href="'+google_info.feedback_url+'" target="_blank" class="thumb vtop inlblk rel tdnone scale4 nophoto"><span class="alt-text">Brak zdjęcia</span></a></td><td valign="top"><div class="space rel"><h4 class="'+(window.action=='ads'?'x-large lheight20 margintop5':'large lheight20')+'"><a target="_blank" class="link adsense" href="'+google_ads[i].url+'" onmouseout="window.status=\'\'" onmouseover="window.status=\''+google_ads[i].visible_url+'\';return true"> <span class="'+(window.action=='ads'?'fbold':'')+'"> '+google_ads[i].line1+'</span></a> </h4><p class="color-9 lheight16 margintop5 x-normal"><span>'+google_ads[i].line2+' '+google_ads[i].line3+'</span></p> <p class="small"><a target="_blank" class="c41 tunder" href="'+google_ads[i].url+'" onmouseout="window.status=\'\'" onmouseover="window.status=\''+google_ads[i].visible_url+'\';return true"><span>'+google_ads[i].visible_url+'</span></a></p></div></td><td width="1" class="wwnormal tright"></td><td width="1" class="tright small"></td></tr></tbody></table></div>';if(google_ads[0].bidtype=="CPC")google_adnum=google_adnum+google_ads.length};$container.html(s);thiz.loadGoogleNextAd();return}}});$(function(){LinkSenderObject=new LinkSender()});LinkSender=BaseClass.extend({init:function(){this._super();this.$form=$('#appLinkSender');this.initValidators()},initValidators:function(){var thiz=this;if(thiz.$form.length>0)thiz.$form.validate({ignore:'.ignore',dontScrollToError:true,rules:{'notif[email_phone]':{required:true,email_phone:true}},messages:{'notif[email_phone]':{required:'To pole jest wymagane',email_phone:'Niepoprawny format e-mail lub numer telefonu'}},submitHandler:function(){var serialized=thiz.$form.serializeArray();thiz.post('misc','sendlinkwithapps',serialized,function(data){if(typeof data.errors!=='undefined'&&!$.isEmptyObject(data.errors)){thiz.$form.validate().showErrors({"notif[email_phone]":data.errors})}else $('button',thiz.$form).addClass('success').removeClass('sending').text('Wysłano!')},'json');return false}}).showErrorsFromAction()}});(function(Context){"use strict";var _settings={bindDelegatedActions:{categoryClick:{parentSelector:"#categorySelectList",selector:'.categorySelectA1, .categorySelectA2',eventType:'click'}},bindUIActions:{favBarSave:{selector:'#favouritesBarSave',eventType:'click'},favBarSaveBtnTop:{selector:'#saveSearchCriteriaTop',eventType:'click'},favBarDeleteBtnTop:{selector:'#cancelSearchCriteriaTop',eventType:'click'},favBarSaveBtnBottom:{selector:'#saveSearchCriteria',eventType:'click'},favBarSaveIconBottom:{selector:'#saveSearchCriteriaStar',eventType:'click'},favBarDeleteBtnBottom:{selector:'#cancelSearchCriteria',eventType:'click'},favBarDeleteIconBottom:{selector:'#cancelSearchCriteriaStar',eventType:'click'},locationChange:{selector:'#proposalContainer',eventType:'click'},locationTyping:{selector:'#cityField',eventType:'keyup'},locationClick:{selector:'#cityField',eventType:'click'},categoryChange:{selector:'#choosecat',eventType:'click'},search:{selector:'#search-submit',eventType:'click'},sortOrder:{selector:'.sort-order-type a',eventType:'click'},listingView:{selector:'#viewSelector a',eventType:'click'},openAdViaPartner:{selector:'#offers_table tr[rel="external"]',eventType:'click'},openAdViaPartnerOnGallery:{selector:'#gallerywide li[rel="external"]',eventType:'click'},openExchangedAd:{selector:'#offers_table [data-exchange="1"] a',eventType:'click'},addToFavourite:{selector:'.observe-link',eventType:'click'},removeFromFavourite:{selector:'.observe-link',eventType:'click'},safeDealOnlyCheckboxFilter:{selector:'.js-safedeal-only-filter',eventType:'click'},logoListingClick:{selector:'.js-business-logo',eventType:'click',delayLocation:true},favSearchBannerListing:{selector:'.js-observe-search-banner-button',eventType:'click'},favSearchBannerListingEnd:{selector:'.js-observe-search-end-banner-button',eventType:'click'}}};Context.widget={init:function(){var _$=Context.$;this.bindUIActions();this.bindDelegatedUIActions();return this},bindDelegatedUIActions:function(){_settings.bindDelegatedActions.categoryClick.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['category_valid_click'],action_type:'category_valid_click',touch_point_page:trackingData.pageView.trackPage})};var key;for(key in _settings.bindDelegatedActions)if(_settings.bindDelegatedActions.hasOwnProperty(key))Context.registerDelegatedEvent(_settings.bindDelegatedActions[key].selector,_settings.bindDelegatedActions[key].eventType,_settings.bindDelegatedActions[key].params,false,_settings.bindDelegatedActions[key].beforeCallback||false,_settings.bindDelegatedActions[key].afterCallback||false,_settings.bindDelegatedActions[key].delayLocation||false,_settings.bindDelegatedActions[key].parentSelector)},bindUIActions:function(){var _$=Context.$;_settings.bindUIActions.favBarSave.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['favourite_search_save'],action_type:'favourite_search_save',touch_point_page:trackingData.pageView.trackPage,touch_point_button:'banner'})};_settings.bindUIActions.favBarSaveBtnTop.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['favourite_search_save'],action_type:'favourite_search_save',touch_point_page:trackingData.pageView.trackPage,touch_point_button:'top'})};_settings.bindUIActions.favBarSaveIconBottom.params=_settings.bindUIActions.favBarSaveBtnBottom.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['favourite_search_save'],action_type:'favourite_search_save',touch_point_page:trackingData.pageView.trackPage,touch_point_button:'bottom'})};_settings.bindUIActions.favBarDeleteBtnTop.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['favourite_search_deleted'],action_type:'favourite_search_deleted',touch_point_page:trackingData.pageView.trackPage,touch_point_button:'top'})};_settings.bindUIActions.favBarDeleteIconBottom.params=_settings.bindUIActions.favBarDeleteBtnBottom.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['favourite_search_deleted'],action_type:'favourite_search_deleted',touch_point_page:trackingData.pageView.trackPage,touch_point_button:'bottom'})};_settings.bindUIActions.locationChange.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['location_clicking'],action_type:'location_clicking',touch_point_page:trackingData.pageView.trackPage,city_id:_$('.autosuggest-geo-input').value,district_id:_$('.autosuggest-geo-district-input').value,region_id:_$('.autosuggest-geo-input-region').value,distance_filt:_$('.autosuggest-geo-dist-input').value})};_settings.bindUIActions.locationTyping.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['location_typing'],action_type:'location_typing',touch_point_page:trackingData.pageView.trackPage,city_id:_$('.autosuggest-geo-input').value,district_id:_$('.autosuggest-geo-district-input').value,region_id:_$('.autosuggest-geo-input-region').value,distance_filt:_$('.autosuggest-geo-dist-input').value})};_settings.bindUIActions.locationClick.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['location_change_click'],action_type:'location_change_click',touch_point_page:trackingData.pageView.trackPage,city_id:_$('.autosuggest-geo-input').value,district_id:_$('.autosuggest-geo-district-input').value,region_id:_$('.autosuggest-geo-input-region').value,distance_filt:_$('.autosuggest-geo-dist-input').value})};_settings.bindUIActions.categoryChange.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['category_change_click'],action_type:'category_change_click',touch_point_page:trackingData.pageView.trackPage})};_settings.bindUIActions.search.params=function(){var getFormValue=function(formObject){if(formObject!=null&&(typeof formObject.value!=='undefined')){if(formObject.getAttribute('defaultval')==formObject.value||formObject.value=='wpisz...')return'';if(formObject.getAttribute('type')=='checkbox'){if(!formObject.checked)return'';return formObject.dataset.value?formObject.dataset.value:formObject.value};return formObject.value};return''},extractName=function(st){return st.replace(new RegExp("^.*search\\\["),'').replace(new RegExp("\\\].*$"),'').replace(new RegExp(trimmedPrefixes),'')},getFormName=function(formObject){if(formObject!=null&&(typeof formObject.name!=='undefined')){var name=extractName(formObject.getAttribute('data-name')?formObject.getAttribute('data-name'):formObject.className);if(name){if(formObject.getAttribute('type')=='checkbox'&&typeof formObject.dataset.value!=='undefined')return name;return name}};return''},s=_$('#search-text'),seller_type=getFormValue(_$('[name*="private_business"]')),price_from=getFormValue(_$('[class*="filter_float_price:from"]'))||getFormValue(_$('input[data-name^="search[filter_float_price:from]"]')),price_to=getFormValue(_$('[class*="filter_float_price:to"]'))||getFormValue(_$('input[data-name^="search[filter_float_price:to]"]')),price_type=price_from==='za darmo'?'free':(price_from==='zamienię'?'exchange':'price'),price_from=(price_type==='price')?price_from:null,if_look_for_description=getFormValue(_$('#title-desc'))?true:false,item_condition=getFormValue(_$('[name*="filter_enum_state"]')),filter_sorting=getFormValue(_$('[name*="search[order]"]')),sortValues={'':null,'created_at:desc':'from_freshness','filter_float_price:asc':'from_cheapest','filter_float_price:desc':'from_most_expensive'},filters=[],filters_values=[],filters_count=0,formObjects=document.querySelectorAll('input[class*="search["], input[data-name^="search"]'),filtersDisabled=['price:from','price:to','state'],trimmedPrefixes='^(filter_float|filter_enum|filter_bool)_';for(var i=0;i<formObjects.length;++i){var name=getFormName(formObjects[i]),value=getFormValue(formObjects[i]);if(name&&value&&filtersDisabled.indexOf(name)==-1)if(filters.indexOf(name)==-1){filters.push(name);filters_values.push(value);filters_count++}else filters_values.push(filters_values.pop()+";"+value)};var optionalParams={trackEvent:['keyword_search'],action_type:'keyword_search',touch_point_page:trackingData.pageView.trackPage,cat_l1_id:(typeof root_category_id!=='undefined'?root_category_id:null),cat_l2_id:(typeof second_category_id!=='undefined'?second_category_id:null),cat_l3_id:((typeof second_category_id!=='undefined')&&(second_category_id!==category_id)?category_id:null),city_id:_$('.autosuggest-geo-input').value,district_id:_$('.autosuggest-geo-district-input').value,region_id:_$('.autosuggest-geo-input-region').value,keyword:(s.value!==s.getAttribute('defaultval')?s.value:null),if_look_for_description:if_look_for_description,item_condition:item_condition===''?'all':item_condition,price_from:price_from?price_from:null,price_to:price_to?price_to:null,price_type:price_type,seller_type:seller_type===''?'all':(seller_type==='business'?'company':seller_type),filter_sorting:sortValues[filter_sorting],filters:filters,filters_values:filters_values,filters_count:filters_count};return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),optionalParams)};_settings.bindUIActions.sortOrder.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['sort_order_change'],action_type:'sort_order_change',touch_point_page:trackingData.pageView.trackPage})};_settings.bindUIActions.sortOrder.beforeCallback=function(node,e,listener,eventType){listener(e)};_settings.bindUIActions.sortOrder.afterCallback=function(){};_settings.bindUIActions.listingView.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['listing_view_change'],action_type:'listing_view_change',touch_point_page:trackingData.pageView.trackPage})};_settings.bindUIActions.openAdViaPartner.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['open_ad_via_partner'],touch_point_page:trackingData.pageView.trackPage,action_type:'open_ad_via_partner','$datajson':'data-features'})};_settings.bindUIActions.openAdViaPartner.beforeCallback=function(node,e,listener,eventType){Context.getClosest(e.target,'a')&&listener(e)};_settings.bindUIActions.openAdViaPartnerOnGallery.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['open_ad_via_partner'],touch_point_page:trackingData.pageView.trackPage,action_type:'open_ad_via_partner','$datajson':'data-features'})};_settings.bindUIActions.openAdViaPartnerOnGallery.beforeCallback=function(node,e,listener,eventType){Context.getClosest(e.target,'a')&&listener(e)};_settings.bindUIActions.openExchangedAd.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['partner_click'],action_type:'partner_click',touch_point_page:trackingData.pageView.trackPage,partner_code:'olxpl'})};_settings.bindUIActions.openExchangedAd.delayLocation=true;_settings.bindUIActions.addToFavourite.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['favourite_ad_click'],action_type:'favourite_ad_click',touch_point_page:trackingData.pageView.trackPage})};_settings.bindUIActions.addToFavourite.beforeCallback=function(node,e,listener,eventType){var stateHandler=Context.getClosest(node,'.observelinkinfo')||Context.getClosest(node,'.observelinkgallery');if(!Context.hasClass(stateHandler,'inobserved'))listener(e);return false};_settings.bindUIActions.removeFromFavourite.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['favourite_ad_deleted'],action_type:'favourite_ad_deleted',touch_point_page:trackingData.pageView.trackPage})};_settings.bindUIActions.removeFromFavourite.beforeCallback=function(node,e,listener,eventType){var stateHandler=Context.getClosest(node,'.observelinkinfo')||Context.getClosest(node,'.observelinkgallery');if(Context.hasClass(stateHandler,'inobserved'))listener(e);return false};_settings.bindUIActions.safeDealOnlyCheckboxFilter.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['filter_sd_check'],action_type:'filter_sd_check',touch_point_page:trackingData.pageView.trackPage})};_settings.bindUIActions.logoListingClick.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['logo_vas_click'],action_type:'logo_vas_click',touch_point_page:trackingData.pageView.trackPage})};_settings.bindUIActions.favSearchBannerListing.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['favourite_search_save'],action_type:'favourite_search_save',touch_point_page:trackingData.pageView.trackPage,touch_point_button:'banner_jobs'})};_settings.bindUIActions.favSearchBannerListingEnd.params=function(){return Context.mergeValidOptionalParams(Context.getDataFrom(trackingData.pageView),{trackEvent:['favourite_search_save'],action_type:'favourite_search_save',touch_point_page:trackingData.pageView.trackPage,touch_point_button:'bottom_jobs'})};_settings.bindUIActions.safeDealOnlyCheckboxFilter.beforeCallback=function(node,e,listener){if(node.checked)listener(e)};Context.unregisterAsyncPayload();var key;for(key in _settings.bindUIActions)if(_settings.bindUIActions.hasOwnProperty(key))Context.registerEvent(_settings.bindUIActions[key].selector,_settings.bindUIActions[key].eventType,_settings.bindUIActions[key].params,true,_settings.bindUIActions[key].beforeCallback||false,_settings.bindUIActions[key].afterCallback||false,_settings.bindUIActions[key].delayLocation||false);return this},XHRCompleted:function(isPageRequest){var isPageRequest=isPageRequest||false;if(isPageRequest)Context.reInit();this.bindUIActions();return this}};return Context})((typeof NinjaTracker!=='undefined'?NinjaTracker:{}));